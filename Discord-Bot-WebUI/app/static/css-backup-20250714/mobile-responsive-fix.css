/**
 * Mobile Responsive Fix CSS
 * 
 * Optimized for modern smartphones (5.8" to 6.7" displays)
 * Targets iPhone 11-15 Pro/Max and Galaxy S20-S24 series
 */

/* Modern mobile optimization */
@media (max-width: 767.98px) {
  /* Font size adjustments - prevent elements from being too large */
  body {
    font-size: 0.875rem; /* 14px base font */
  }
  
  h1, .h1 { font-size: 1.75rem !important; }  /* 28px */
  h2, .h2 { font-size: 1.5rem !important; }   /* 24px */
  h3, .h3 { font-size: 1.25rem !important; }  /* 20px */
  h4, .h4 { font-size: 1.125rem !important; } /* 18px */
  h5, .h5 { font-size: 1rem !important; }     /* 16px */
  h6, .h6 { font-size: 0.875rem !important; } /* 14px */
  
  /* Reduce padding to save space */
  .container-p-y {
    padding-top: 0.75rem !important;
    padding-bottom: 0.75rem !important;
  }
  
  .card {
    margin-bottom: 0.75rem;
  }
  
  .card-header {
    padding: 0.625rem 0.75rem;
  }
  
  .card-body {
    padding: 0.75rem;
  }
  
  .card-footer {
    padding: 0.625rem 0.75rem;
  }
  
  /* Reduce form element heights */
  .form-control, 
  .form-select, 
  .input-group-text {
    padding: 0.375rem 0.625rem;
    min-height: 40px;
    font-size: 0.9375rem !important; /* 15px - large enough to prevent zoom */
  }
  
  /* Better button sizing */
  .btn {
    padding: 0.375rem 0.75rem;
    min-height: 40px;
    font-size: 0.9375rem;
  }
  
  .btn-sm {
    padding: 0.25rem 0.5rem;
    min-height: 32px;
    font-size: 0.8125rem;
  }
  
  /* Fix table responsiveness */
  .table th, 
  .table td {
    padding: 0.5rem;
    white-space: nowrap;
  }
  
  /* Fix select dropdown and date picker heights */
  .select2-container--bootstrap-5 .select2-selection {
    min-height: 40px !important;
  }
  
  .flatpickr-day {
    min-height: 38px !important;
    line-height: 38px !important;
  }
  
  /* Improve modal spacing and button layout */
  .modal-dialog {
    margin: 0.25rem;
    max-width: calc(100% - 0.5rem);
  }
  
  .modal-header {
    padding: 0.75rem;
  }
  
  .modal-body {
    padding: 0.75rem;
    max-height: calc(100vh - 150px);
    overflow-y: auto;
  }
  
  .modal-footer {
    padding: 0.75rem;
  }
  
  /* Better spacing for action buttons */
  .modal-footer .btn,
  .card-footer .btn {
    flex: 1;
    padding: 0.375rem 0.5rem;
    min-width: 80px;
    margin: 0 0.25rem;
  }
  
  /* Enhanced dropdown menu */
  .dropdown-menu {
    padding: 0.375rem 0;
    min-width: 180px;
    max-width: 95vw;
  }
  
  .dropdown-item {
    padding: 0.5rem 0.75rem;
    min-height: 40px;
    font-size: 0.9375rem;
  }
  
  /* Improve datatable controls */
  .dataTables_filter input,
  .dataTables_length select {
    min-height: 36px !important;
    padding: 0.25rem 0.5rem !important;
  }
  
  .dataTables_info,
  .dataTables_paginate {
    margin-top: 0.5rem !important;
    font-size: 0.8125rem !important;
  }
  
  /* Fix icon sizing */
  .ti, .fa, .fas, .far, .fab {
    font-size: 1.125rem !important;
  }
  
  /* Fixed footer action buttons */
  .fixed-action-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bs-body-bg, #fff);
    padding: 0.5rem;
    border-top: 1px solid rgba(0, 0, 0, 0.125);
    z-index: 1030;
    display: flex;
    justify-content: space-around;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
  }
  
  /* Make tabs more compact */
  .nav-tabs .nav-link,
  .nav-pills .nav-link {
    padding: 0.5rem 0.75rem;
    min-height: 40px;
    font-size: 0.9375rem;
  }
  
  /* Card action buttons for important actions */
  .card-actions {
    display: flex;
    justify-content: space-between;
  }
  
  .card-actions .btn {
    flex: 1;
    margin: 0 0.25rem;
    font-size: 0.875rem;
  }
  
  /* Fix select2 dropdown positioning */
  .select2-container--open .select2-dropdown {
    min-width: 200px !important;
    max-width: 95vw !important;
  }
  
  /* Improve form group spacing */
  .mb-3 {
    margin-bottom: 0.75rem !important;
  }
  
  /* Remove text truncation in critical areas */
  .table-responsive .badge,
  .table-responsive .btn-sm,
  .player-name,
  .match-details h5,
  .match-details h6 {
    white-space: normal !important;
  }
  
  /* Better avatar sizing */
  .avatar-sm img {
    width: 32px !important;
    height: 32px !important;
  }
  
  .avatar-md img {
    width: 40px !important;
    height: 40px !important;
  }
  
  /* Improved table header positioning */
  .dtfc-fixed-left,
  .dtfc-fixed-right {
    z-index: 1020 !important; /* Ensure fixed columns appear above content */
  }
  
  /* Improve page layout spacing */
  .content-wrapper {
    padding-bottom: calc(1rem + var(--safe-area-bottom, 0px));
  }
  
  /* Fix menu sidebar */
  .menu-vertical {
    width: 260px !important;
  }
  
  /* Prevent header wrapping issues */
  .app-brand-text {
    font-size: 1.25rem !important;
  }
  
  /* Improve readability of stats */
  .player-stat {
    font-size: 1rem !important;
    font-weight: 600 !important;
  }
  
  .player-stat-label {
    font-size: 0.75rem !important;
    opacity: 0.8;
  }
}

/* Landscape mode optimizations */
@media (max-width: 767.98px) and (orientation: landscape) {
  .modal-dialog {
    max-width: 90vw;
    margin: 0.5rem auto;
  }
  
  .modal-body {
    max-height: calc(100vh - 160px);
  }
  
  /* Improve table visibility */
  .table-responsive {
    max-height: calc(100vh - 200px);
  }
}

/* High-DPI screens (iPhone Pro, Galaxy S Ultra series) */
@media 
(-webkit-min-device-pixel-ratio: 2) and (max-width: 767.98px),
(min-resolution: 192dpi) and (max-width: 767.98px) {
  /* Slightly larger text for ultra-high-res screens */
  body {
    font-size: 0.9375rem;
  }
  
  /* Sharper borders */
  .border,
  .border-top,
  .border-right,
  .border-bottom,
  .border-left {
    border-width: 0.5px !important;
  }
}

/* Fix WebKit 100vh issue more aggressively */
@supports (-webkit-touch-callout: none) {
  .modal-dialog {
    min-height: -webkit-fill-available;
    max-height: -webkit-fill-available;
  }
  
  .layout-wrapper {
    min-height: -webkit-fill-available;
  }
}

/* General overrides to help with small scrolling movements */
html, body {
  overscroll-behavior-y: none; /* Prevent bounce effects & pull-to-refresh */
  touch-action: pan-y; /* Allow vertical scrolling but restrict other gestures */
}

body.modal-open {
  position: fixed;
  width: 100%;
}

/* Accessibility improvements for touch targets */
@media (max-width: 767.98px) {
  /* Ensure all interactive elements have sufficient size */
  .nav-link,
  .dropdown-item,
  .btn,
  a[role="button"],
  button,
  input[type="checkbox"] + label,
  input[type="radio"] + label {
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
  }
}