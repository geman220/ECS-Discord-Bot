/**
 * ============================================================================
 * STATE UTILITIES
 * ============================================================================
 *
 * Standardized state classes for dynamic UI state changes via JavaScript.
 *
 * NAMING CONVENTION:
 * ------------------
 * All custom state classes use the `is-*` prefix (BEM modifier pattern).
 * This distinguishes them from Bootstrap's built-in state classes.
 *
 * WHEN TO USE BOOTSTRAP `.active` vs BEM `.is-active`:
 * ----------------------------------------------------
 * Use `.active` (Bootstrap):
 *   - Bootstrap nav components (.nav-link.active, .dropdown-item.active)
 *   - Bootstrap tabs (.tab-pane.active)
 *   - Bootstrap pagination (.page-item.active)
 *   - Bootstrap buttons in button groups (.btn.active)
 *   - Any component using Bootstrap's JavaScript for state management
 *
 * Use `.is-active` (BEM):
 *   - Custom BEM components (.c-admin-nav__link.is-active)
 *   - Components styled entirely with our design system
 *   - Any component NOT using Bootstrap's JavaScript
 *
 * STANDARD STATE CLASSES:
 * -----------------------
 * - .is-loading    - Element is loading data
 * - .is-active     - Element is in active/selected state
 * - .is-disabled   - Element is disabled (not interactive)
 * - .is-hidden     - Element is hidden (display: none)
 * - .is-invisible  - Element is invisible (visibility: hidden)
 * - .is-error      - Element has validation error
 * - .is-success    - Element has success state
 * - .is-warning    - Element has warning state
 * - .is-selected   - Element is selected (multi-select context)
 * - .is-collapsed  - Element is collapsed
 * - .is-expanded   - Element is expanded
 * - .is-dragging   - Element is being dragged
 *
 * JAVASCRIPT INTEGRATION:
 * -----------------------
 * These classes should be toggled via JavaScript using data-* attribute
 * selectors, NOT by querying the state class itself:
 *
 * GOOD: element.querySelector('[data-action="toggle"]').classList.add('is-active')
 * BAD:  element.querySelector('.is-active').classList.remove('is-active')
 *
 * ============================================================================
 */

/* ============================================
   LOADING STATES
   ============================================ */

/**
 * Generic loading state
 */
.is-loading {
    position: relative !important;
    pointer-events: none !important;
    opacity: 0.6 !important;
}

/**
 * Loading with spinner overlay
 */
.is-loading::after {
    content: "" !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 24px !important;
    height: 24px !important;
    margin: -12px 0 0 -12px !important;
    border: 3px solid rgba(0, 0, 0, 0.1) !important;
    border-top-color: var(--color-primary, #007bff) !important;
    border-radius: 50% !important;
    animation: spin 0.8s linear infinite !important;
    z-index: 10 !important;
}

[data-style="dark"] .is-loading::after {
    border-color: rgba(255, 255, 255, 0.1) !important;
    border-top-color: var(--color-primary, #0d6efd) !important;
}

/**
 * Loading spinner (standalone)
 */
.loading-spinner {
    display: inline-block !important;
    width: 20px !important;
    height: 20px !important;
    border: 2px solid rgba(0, 0, 0, 0.1) !important;
    border-top-color: var(--color-primary, #007bff) !important;
    border-radius: 50% !important;
    animation: spin 0.8s linear infinite !important;
}

[data-style="dark"] .loading-spinner {
    border-color: rgba(255, 255, 255, 0.1) !important;
    border-top-color: var(--color-primary, #0d6efd) !important;
}

.loading-spinner-sm {
    width: 16px !important;
    height: 16px !important;
    border-width: 2px !important;
}

.loading-spinner-lg {
    width: 32px !important;
    height: 32px !important;
    border-width: 3px !important;
}

/**
 * Loading overlay
 */
.loading-overlay {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(255, 255, 255, 0.8) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 1000 !important;
}

[data-style="dark"] .loading-overlay {
    background: rgba(0, 0, 0, 0.8) !important;
}

/**
 * Loading text
 */
.loading-text::after {
    content: "..." !important;
    animation: loadingDots 1.5s steps(4, end) infinite !important;
}

@keyframes loadingDots {
    0%, 20% { content: "."; }
    40% { content: ".."; }
    60%, 100% { content: "..."; }
}

/* ============================================
   ACTIVE STATES
   ============================================ */

/**
 * Active state indicator
 */
.is-active {
    font-weight: 600 !important;
    color: var(--color-primary, #0d6efd) !important;
}

/**
 * Active background highlight
 */
.is-active-bg,
.active-bg {
    background-color: rgba(13, 110, 253, 0.1) !important;
}

[data-style="dark"] .is-active-bg,
[data-style="dark"] .active-bg {
    background-color: rgba(13, 110, 253, 0.2) !important;
}

/**
 * Active border
 */
.is-active-border {
    border-color: var(--color-primary, #0d6efd) !important;
    border-width: 2px !important;
}

/**
 * Active scale (button press effect)
 */
.is-active-scale {
    transform: scale(0.95) !important;
}

/* ============================================
   DISABLED STATES
   ============================================ */

/**
 * Disabled state
 */
.is-disabled,
.disabled {
    opacity: 0.5 !important;
    pointer-events: none !important;
    cursor: not-allowed !important;
}

/**
 * Disabled with different opacity
 */
.is-disabled-light {
    opacity: 0.7 !important;
    pointer-events: none !important;
    cursor: not-allowed !important;
}

/**
 * Disabled without opacity change
 */
.is-disabled-no-opacity {
    pointer-events: none !important;
    cursor: not-allowed !important;
}

/* ============================================
   HIDDEN STATES
   ============================================ */

/**
 * Hidden state (display: none)
 */
.is-hidden {
    display: none !important;
}

/**
 * Hidden state (visibility)
 */
.is-invisible {
    visibility: hidden !important;
}

/**
 * Hidden state (opacity)
 */
.is-transparent {
    opacity: 0 !important;
}

/* ============================================
   ANIMATION STATES
   ============================================ */

/**
 * Removing state (fade out + scale down)
 */
.removing {
    animation: removeElement 0.3s ease-out forwards !important;
}

@keyframes removeElement {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.8);
    }
}

/**
 * Appearing state (fade in + slide up)
 */
.appearing {
    animation: appearElement 0.3s ease-out forwards !important;
}

@keyframes appearElement {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/**
 * Fading state
 */
.is-fading {
    transition: opacity 0.3s ease-in-out !important;
}

/**
 * Shake animation (error state)
 */
.shake {
    animation: shake 0.5s ease-in-out !important;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/**
 * Pulse animation (attention)
 */
.pulse-attention {
    animation: pulseAttention 2s ease-in-out infinite !important;
}

@keyframes pulseAttention {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
}

/* ============================================
   HOVER STATES
   ============================================ */

/**
 * Hover lift effect
 */
.hover-lift {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out !important;
}

.hover-lift:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

[data-style="dark"] .hover-lift:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
}

/**
 * Hover grow effect
 */
.hover-grow {
    transition: transform 0.2s ease-in-out !important;
}

.hover-grow:hover {
    transform: scale(1.05) !important;
}

/**
 * Hover brighten effect
 */
.hover-brighten {
    transition: filter 0.2s ease-in-out !important;
}

.hover-brighten:hover {
    filter: brightness(1.1) !important;
}

/**
 * Hover darken effect
 */
.hover-darken {
    transition: filter 0.2s ease-in-out !important;
}

.hover-darken:hover {
    filter: brightness(0.9) !important;
}

/**
 * Hover shadow effect
 */
.hover-shadow {
    transition: box-shadow 0.2s ease-in-out !important;
}

.hover-shadow:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

[data-style="dark"] .hover-shadow:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

/**
 * Hover underline effect
 */
.hover-underline {
    text-decoration: none !important;
    position: relative !important;
}

.hover-underline::after {
    content: "" !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 0 !important;
    height: 2px !important;
    background-color: currentColor !important;
    transition: width 0.3s ease-in-out !important;
}

.hover-underline:hover::after {
    width: 100% !important;
}

/* ============================================
   FOCUS STATES
   ============================================ */

/**
 * Custom focus ring
 */
.focus-ring:focus {
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25) !important;
}

/**
 * Focus visible (keyboard only)
 */
.focus-visible-ring:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25) !important;
}

/**
 * Remove focus ring
 */
.focus-none:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* ============================================
   ERROR/SUCCESS STATES
   ============================================ */

/**
 * Error state
 */
.is-error,
.has-error {
    border-color: var(--color-danger, #dc3545) !important;
    color: var(--color-danger, #dc3545) !important;
}

.is-error-bg {
    background-color: rgba(220, 53, 69, 0.1) !important;
}

/**
 * Success state
 */
.is-success,
.has-success {
    border-color: var(--color-success, #198754) !important;
    color: var(--color-success, #198754) !important;
}

.is-success-bg {
    background-color: rgba(25, 135, 84, 0.1) !important;
}

/**
 * Warning state
 */
.is-warning,
.has-warning {
    border-color: var(--color-warning, #ffc107) !important;
    color: var(--color-warning-900, #856404) !important;
}

.is-warning-bg {
    background-color: rgba(255, 193, 7, 0.1) !important;
}

/**
 * Info state
 */
.is-info,
.has-info {
    border-color: var(--color-info, #0dcaf0) !important;
    color: var(--color-info-800, #055160) !important;
}

.is-info-bg {
    background-color: rgba(13, 202, 240, 0.1) !important;
}

/* ============================================
   SELECTED STATES
   ============================================ */

/**
 * Selected state
 */
.is-selected {
    background-color: rgba(13, 110, 253, 0.15) !important;
    border-color: var(--color-primary, #0d6efd) !important;
}

/**
 * Selected with checkmark
 */
.is-selected-check::after {
    content: "âœ“" !important;
    position: absolute !important;
    top: 5px !important;
    right: 5px !important;
    color: var(--color-primary, #0d6efd) !important;
    font-weight: bold !important;
}

/* ============================================
   DRAGGING STATES
   ============================================ */

/**
 * Dragging state
 */
.is-dragging {
    opacity: 0.5 !important;
    cursor: move !important;
}

/**
 * Drag over state
 */
.is-drag-over {
    background-color: rgba(13, 110, 253, 0.1) !important;
    border: 2px dashed var(--color-primary, #0d6efd) !important;
}

/* ============================================
   COLLAPSED/EXPANDED STATES
   ============================================ */

/**
 * Collapsed state
 */
.is-collapsed {
    max-height: 0 !important;
    overflow: hidden !important;
    transition: max-height 0.3s ease-out !important;
}

/**
 * Expanded state
 */
.is-expanded {
    max-height: 1000px !important;
    overflow: visible !important;
    transition: max-height 0.3s ease-in !important;
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
    .removing,
    .appearing,
    .shake,
    .pulse-attention,
    .hover-lift,
    .hover-grow,
    .hover-brighten,
    .hover-darken,
    .hover-shadow,
    .is-fading {
        animation: none !important;
        transition: none !important;
    }
}
