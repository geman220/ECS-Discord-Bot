/**
 * ============================================================================
 * STATE UTILITIES
 * ============================================================================
 *
 * Standardized state classes for dynamic UI state changes via JavaScript.
 *
 * NAMING CONVENTION:
 * ------------------
 * All custom state classes use the `is-*` prefix (BEM modifier pattern).
 * This distinguishes them from Bootstrap's built-in state classes.
 *
 * WHEN TO USE BOOTSTRAP `.active` vs BEM `.is-active`:
 * ----------------------------------------------------
 * Use `.active` (Bootstrap):
 *   - Bootstrap nav components (.nav-link.active, .dropdown-item.active)
 *   - Bootstrap tabs (.tab-pane.active)
 *   - Bootstrap pagination (.page-item.active)
 *   - Bootstrap buttons in button groups (.btn.active)
 *   - Any component using Bootstrap's JavaScript for state management
 *
 * Use `.is-active` (BEM):
 *   - Custom BEM components (.c-admin-nav__link.is-active)
 *   - Components styled entirely with our design system
 *   - Any component NOT using Bootstrap's JavaScript
 *
 * STANDARD STATE CLASSES:
 * -----------------------
 * - .is-loading    - Element is loading data
 * - .is-active     - Element is in active/selected state
 * - .is-disabled   - Element is disabled (not interactive)
 * - .is-hidden     - Element is hidden (display: none)
 * - .is-invisible  - Element is invisible (visibility: hidden)
 * - .is-error      - Element has validation error
 * - .is-success    - Element has success state
 * - .is-warning    - Element has warning state
 * - .is-selected   - Element is selected (multi-select context)
 * - .is-collapsed  - Element is collapsed
 * - .is-expanded   - Element is expanded
 * - .is-dragging   - Element is being dragged
 *
 * JAVASCRIPT INTEGRATION:
 * -----------------------
 * These classes should be toggled via JavaScript using data-* attribute
 * selectors, NOT by querying the state class itself:
 *
 * GOOD: element.querySelector('[data-action="toggle"]').classList.add('is-active')
 * BAD:  element.querySelector('.is-active').classList.remove('is-active')
 *
 * ============================================================================
 */

/* ============================================
   LOADING STATES
   ============================================ */

/**
 * Generic loading state
 */
.is-loading {
    position: relative;
    pointer-events: none;
    opacity: 0.6;
}

/**
 * Loading with spinner overlay
 */
.is-loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 24px;
    height: 24px;
    margin: -12px 0 0 -12px;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-top-color: var(--color-primary, var(--color-primary));
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    z-index: 10;
}

[data-style="dark"] .is-loading::after {
    border-color: rgba(255, 255, 255, 0.1);
    border-top-color: var(--color-primary, var(--color-primary));
}

/**
 * Loading spinner (standalone)
 */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(0, 0, 0, 0.1);
    border-top-color: var(--color-primary, var(--color-primary));
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

[data-style="dark"] .loading-spinner {
    border-color: rgba(255, 255, 255, 0.1);
    border-top-color: var(--color-primary, var(--color-primary));
}

.loading-spinner-sm {
    width: 16px;
    height: 16px;
    border-width: 2px;
}

.loading-spinner-lg {
    width: 32px;
    height: 32px;
    border-width: 3px;
}

/**
 * Loading overlay
 */
.loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

[data-style="dark"] .loading-overlay {
    background: rgba(0, 0, 0, 0.8);
}

/**
 * Loading text
 */
.loading-text::after {
    content: "...";
    animation: loadingDots 1.5s steps(4, end) infinite;
}

@keyframes loadingDots {
    0%, 20% { content: "."; }
    40% { content: ".."; }
    60%, 100% { content: "..."; }
}

/* ============================================
   ACTIVE STATES
   ============================================ */

/**
 * Active state indicator
 */
.is-active {
    font-weight: 600;
    color: var(--color-primary, var(--color-primary));
}

/**
 * Active background highlight
 */
.is-active-bg,
.active-bg {
    background-color: rgba(13, 110, 253, 0.1);
}

[data-style="dark"] .is-active-bg,
[data-style="dark"] .active-bg {
    background-color: rgba(13, 110, 253, 0.2);
}

/**
 * Active border
 */
.is-active-border {
    border-color: var(--color-primary, var(--color-primary));
    border-width: 2px;
}

/**
 * Active scale (button press effect)
 */
.is-active-scale {
    transform: scale(0.95);
}

/* ============================================
   DISABLED STATES
   ============================================ */

/**
 * Disabled state
 */
.is-disabled,
.disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
}

/**
 * Disabled with different opacity
 */
.is-disabled-light {
    opacity: 0.7;
    pointer-events: none;
    cursor: not-allowed;
}

/**
 * Disabled without opacity change
 */
.is-disabled-no-opacity {
    pointer-events: none;
    cursor: not-allowed;
}

/* ============================================
   HIDDEN STATES
   ============================================ */

/**
 * Hidden state (display: none)
 */
.is-hidden {
    display: none;
}

/**
 * Hidden state (visibility)
 */
.is-invisible {
    visibility: hidden;
}

/**
 * Hidden state (opacity)
 */
.is-transparent {
    opacity: 0;
}

/* ============================================
   ANIMATION STATES
   ============================================ */

/**
 * Removing state (fade out + scale down)
 */
.removing {
    animation: removeElement 0.3s ease-out forwards;
}

@keyframes removeElement {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.8);
    }
}

/**
 * Appearing state (fade in + slide up)
 */
.appearing {
    animation: appearElement 0.3s ease-out forwards;
}

@keyframes appearElement {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/**
 * Fading state
 */
.is-fading {
    transition: opacity 0.3s ease-in-out;
}

/**
 * Shake animation (error state)
 */
.shake {
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/**
 * Pulse animation (attention)
 */
.pulse-attention {
    animation: pulseAttention 2s ease-in-out infinite;
}

@keyframes pulseAttention {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.8;
    }
}

/* ============================================
   HOVER STATES
   ============================================ */

/**
 * Hover lift effect
 */
.hover-lift {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

[data-style="dark"] .hover-lift:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

/**
 * Hover grow effect
 */
.hover-grow {
    transition: transform 0.2s ease-in-out;
}

.hover-grow:hover {
    transform: scale(1.05);
}

/**
 * Hover brighten effect
 */
.hover-brighten {
    transition: filter 0.2s ease-in-out;
}

.hover-brighten:hover {
    filter: brightness(1.1);
}

/**
 * Hover darken effect
 */
.hover-darken {
    transition: filter 0.2s ease-in-out;
}

.hover-darken:hover {
    filter: brightness(0.9);
}

/**
 * Hover shadow effect
 */
.hover-shadow {
    transition: box-shadow 0.2s ease-in-out;
}

.hover-shadow:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

[data-style="dark"] .hover-shadow:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/**
 * Hover underline effect
 */
.hover-underline {
    text-decoration: none;
    position: relative;
}

.hover-underline::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: currentColor;
    transition: width 0.3s ease-in-out;
}

.hover-underline:hover::after {
    width: 100%;
}

/* ============================================
   FOCUS STATES
   ============================================ */

/**
 * Custom focus ring
 */
.focus-ring:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
}

/**
 * Focus visible (keyboard only)
 */
.focus-visible-ring:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
}

/**
 * Remove focus ring
 */
.focus-none:focus {
    outline: none;
    box-shadow: none;
}

/* ============================================
   ERROR/SUCCESS STATES
   ============================================ */

/**
 * Error state
 */
.is-error,
.has-error {
    border-color: var(--color-danger, var(--color-danger-600));
    color: var(--color-danger, var(--color-danger-600));
}

.is-error-bg {
    background-color: rgba(220, 53, 69, 0.1);
}

/**
 * Success state
 */
.is-success,
.has-success {
    border-color: var(--color-success, var(--color-success-600));
    color: var(--color-success, var(--color-success-600));
}

.is-success-bg {
    background-color: rgba(25, 135, 84, 0.1);
}

/**
 * Warning state
 */
.is-warning,
.has-warning {
    border-color: var(--color-warning, var(--color-warning));
    color: var(--color-warning-900, #856404);
}

.is-warning-bg {
    background-color: rgba(255, 193, 7, 0.1);
}

/**
 * Info state
 */
.is-info,
.has-info {
    border-color: var(--color-info, #0dcaf0);
    color: var(--color-info-800, #055160);
}

.is-info-bg {
    background-color: rgba(13, 202, 240, 0.1);
}

/* ============================================
   SELECTED STATES
   ============================================ */

/**
 * Selected state
 */
.is-selected {
    background-color: rgba(13, 110, 253, 0.15);
    border-color: var(--color-primary, var(--color-primary));
}

/**
 * Selected with checkmark
 */
.is-selected-check::after {
    content: "âœ“";
    position: absolute;
    top: 5px;
    right: 5px;
    color: var(--color-primary, var(--color-primary));
    font-weight: bold;
}

/* ============================================
   DRAGGING STATES
   ============================================ */

/**
 * Dragging state
 */
.is-dragging {
    opacity: 0.5;
    cursor: move;
}

/**
 * Drag over state
 */
.is-drag-over {
    background-color: rgba(13, 110, 253, 0.1);
    border: 2px dashed var(--color-primary, var(--color-primary));
}

/* ============================================
   COLLAPSED/EXPANDED STATES
   ============================================ */

/**
 * Collapsed state
 */
.is-collapsed {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

/**
 * Expanded state
 */
.is-expanded {
    max-height: 1000px;
    overflow: visible;
    transition: max-height 0.3s ease-in;
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
    .removing,
    .appearing,
    .shake,
    .pulse-attention,
    .hover-lift,
    .hover-grow,
    .hover-brighten,
    .hover-darken,
    .hover-shadow,
    .is-fading {
        animation: none;
        transition: none;
    }
}
