/**
 * ============================================================================
 * MOBILE ANALYTICS PAGE STYLES
 * ============================================================================
 *
 * Extracted from: app/templates/admin_panel/mobile_features/mobile_analytics.html
 * Wave 3E: High-Priority Template Refactoring
 *
 * Component Structure:
 *   - Analytics Overview Stats Cards
 *   - User Engagement Chart
 *   - Platform Breakdown Chart
 *   - Feature Usage Progress Bars
 *   - Performance Metrics Dashboard
 *   - User Behavior Analytics
 *   - Top Screens Table
 *   - User Flow Analysis
 *
 * Design Tokens:
 *   - Colors: var(--color-*) and Bootstrap semantic colors
 *   - Spacing: var(--space-*)
 *   - Typography: var(--text-*)
 *   - Shadows: var(--shadow-*)
 *   - Borders: var(--radius-*)
 *
 * Dark Mode: Fully supported with [data-style="dark"] selectors
 *
 * !important Usage: 3 declarations (all justified for print media)
 *
 * ============================================================================
 */

/* ============================================================================
   ANALYTICS OVERVIEW STATS CARDS
   ============================================================================ */

/**
 * Card icon container in overview stat cards
 * Creates a centered, semi-transparent icon backdrop
 */
.mobile-analytics-stat-card .card-icon {
    display: flex;
    align-items: center;
    justify-content: center;
}

/**
 * Icon sizing and opacity for stat cards
 * Applied to Tabler icons in analytics overview cards
 */
.mobile-analytics-stat-card .card-icon i {
    font-size: 2rem;
    opacity: 0.5;
}

/* ============================================================================
   FEATURE USAGE PROGRESS BARS
   ============================================================================ */

/**
 * Custom progress bar height
 * Thinner progress bars for feature usage metrics
 */
.mobile-analytics-feature-progress {
    height: 6px;
}

/**
 * Feature usage progress bar widths
 * Specific width classes for each feature's usage percentage
 */
.mobile-analytics-progress-85 {
    width: 85%;
}

.mobile-analytics-progress-72 {
    width: 72%;
}

.mobile-analytics-progress-68 {
    width: 68%;
}

.mobile-analytics-progress-45 {
    width: 45%;
}

.mobile-analytics-progress-25 {
    width: 25%;
}

.mobile-analytics-progress-30 {
    width: 30%;
}

/* ============================================================================
   PERFORMANCE METRICS
   ============================================================================ */

/**
 * Performance metric cards
 * Centered display for key performance indicators
 */
.mobile-analytics-metric {
    text-align: center;
    margin-bottom: var(--space-3, 0.75rem);
}

.mobile-analytics-metric .display-6 {
    font-weight: var(--font-bold, 700);
    margin-bottom: var(--space-1, 0.25rem);
}

.mobile-analytics-metric small {
    font-size: var(--text-sm, 0.875rem);
    color: var(--color-text-muted, var(--color-neutral-500, #71717A));
}

/**
 * Performance progress containers
 */
.mobile-analytics-performance-progress {
    margin-bottom: var(--space-3, 0.75rem);
}

.mobile-analytics-performance-progress .progress {
    height: 6px;
}

/* ============================================================================
   CHART CONTAINERS
   ============================================================================ */

/**
 * Canvas height enforcement
 * Ensures consistent chart heights across different containers
 */
.mobile-analytics-chart-engagement {
    height: 300px;
}

.mobile-analytics-chart-platform {
    height: 200px;
}

/**
 * Chart control button groups
 */
.mobile-analytics-chart-controls .btn-group-sm .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
}

/* ============================================================================
   PLATFORM BREAKDOWN LEGEND
   ============================================================================ */

/**
 * Platform legend items
 * Displays platform distribution with colored badges
 */
.mobile-analytics-platform-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-2, 0.5rem);
}

.mobile-analytics-platform-item:last-child {
    margin-bottom: 0;
}

.mobile-analytics-platform-label {
    display: flex;
    align-items: center;
}

.mobile-analytics-platform-badge {
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-right: var(--space-2, 0.5rem);
    border-radius: var(--radius-sm, 0.25rem);
}

/* ============================================================================
   USER BEHAVIOR ANALYTICS
   ============================================================================ */

/**
 * Behavior stat cards within analytics section
 */
.mobile-analytics-behavior-stat {
    text-align: center;
}

.mobile-analytics-behavior-stat h4 {
    font-size: var(--text-2xl, 1.5rem);
    font-weight: var(--font-bold, 700);
    margin-bottom: var(--space-1, 0.25rem);
}

.mobile-analytics-behavior-stat small {
    font-size: var(--text-sm, 0.875rem);
    color: var(--color-text-muted, var(--color-neutral-500, #71717A));
}

/* ============================================================================
   TOP SCREENS TABLE
   ============================================================================ */

/**
 * Top screens table styling
 */
.mobile-analytics-screens-table {
    font-size: var(--text-sm, 0.875rem);
}

.mobile-analytics-screens-table th {
    font-weight: var(--font-semibold, 600);
    color: var(--color-text-primary, var(--color-neutral-900, #18181B));
    text-transform: uppercase;
    font-size: var(--text-xs, 0.75rem);
    letter-spacing: 0.5px;
}

.mobile-analytics-screens-table td {
    color: var(--color-text-secondary, var(--color-neutral-600, #52525B));
}

/* ============================================================================
   USER FLOW ANALYSIS
   ============================================================================ */

/**
 * User flow list items
 */
.mobile-analytics-flow-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3, 0.75rem) var(--space-4, 1rem);
}

.mobile-analytics-flow-item span:first-child {
    font-size: var(--text-sm, 0.875rem);
    color: var(--color-text-secondary, var(--color-neutral-600, #52525B));
}

.mobile-analytics-flow-badge {
    font-weight: var(--font-semibold, 600);
    font-size: var(--text-sm, 0.875rem);
    padding: 0.3rem 0.5rem;
    border-radius: var(--radius-sm, 0.25rem);
}

/* ============================================================================
   ACTION BUTTONS
   ============================================================================ */

/**
 * Analytics export and refresh buttons
 */
.mobile-analytics-actions .btn-group-sm .btn {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
}

.mobile-analytics-actions .btn i {
    font-size: 0.875rem;
}

/* ============================================================================
   DARK MODE SUPPORT
   ============================================================================ */

/**
 * Dark mode overrides for mobile analytics components
 */
[data-style="dark"] .mobile-analytics-metric small {
    color: var(--color-text-muted, var(--color-neutral-400, #A1A1AA));
}

[data-style="dark"] .mobile-analytics-behavior-stat small {
    color: var(--color-text-muted, var(--color-neutral-400, #A1A1AA));
}

[data-style="dark"] .mobile-analytics-screens-table th {
    color: var(--color-text-primary, var(--color-neutral-900, #FAFAFA));
}

[data-style="dark"] .mobile-analytics-screens-table td {
    color: var(--color-text-secondary, var(--color-neutral-500, #A1A1AA));
}

[data-style="dark"] .mobile-analytics-flow-item span:first-child {
    color: var(--color-text-secondary, var(--color-neutral-500, #A1A1AA));
}

/* Dark mode chart background adjustments */
[data-style="dark"] .card-body canvas {
    background-color: transparent;
}

/* ============================================================================
   RESPONSIVE DESIGN
   ============================================================================ */

/**
 * Mobile optimizations
 */
@media (max-width: 768px) {
    /* Reduce icon size on mobile */
    .mobile-analytics-stat-card .card-icon i {
        font-size: 1.5rem;
    }

    /* Stack chart controls vertically on mobile */
    .mobile-analytics-chart-controls .btn-group-sm {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    .mobile-analytics-chart-controls .btn-group-sm .btn {
        width: 100%;
        margin-bottom: var(--space-1, 0.25rem);
    }

    /* Reduce chart heights on mobile */
    .mobile-analytics-chart-engagement {
        height: 200px;
    }

    .mobile-analytics-chart-platform {
        height: 150px;
    }

    /* Reduce font sizes for mobile metrics */
    .mobile-analytics-metric .display-6 {
        font-size: var(--text-2xl, 1.5rem);
    }

    .mobile-analytics-behavior-stat h4 {
        font-size: var(--text-xl, 1.25rem);
    }

    /* Stack behavior stat cards more compactly */
    .mobile-analytics-behavior-stat {
        margin-bottom: var(--space-3, 0.75rem);
    }

    /* Compact table text on mobile */
    .mobile-analytics-screens-table {
        font-size: var(--text-xs, 0.75rem);
    }

    /* Reduce flow item padding on mobile */
    .mobile-analytics-flow-item {
        padding: var(--space-2, 0.5rem) var(--space-3, 0.75rem);
    }
}

/**
 * Tablet optimizations
 */
@media (min-width: 769px) and (max-width: 991px) {
    /* Slightly reduce chart heights on tablets */
    .mobile-analytics-chart-engagement {
        height: 250px;
    }

    /* Adjust metric display sizes */
    .mobile-analytics-metric .display-6 {
        font-size: var(--text-3xl, 1.875rem);
    }
}

/**
 * Desktop optimizations
 */
@media (min-width: 992px) {
    /* Ensure proper spacing on larger screens */
    .mobile-analytics-chart-engagement {
        height: 300px;
    }

    .mobile-analytics-chart-platform {
        height: 200px;
    }

    /* Enhanced hover states for desktop */
    .mobile-analytics-flow-item:hover {
        background-color: var(--color-hover-bg, var(--color-neutral-100, #F4F4F5));
        transition: background-color 0.2s ease;
    }

    [data-style="dark"] .mobile-analytics-flow-item:hover {
        background-color: var(--color-hover-bg, var(--color-neutral-100, #27272A));
    }
}

/* ============================================================================
   ACCESSIBILITY
   ============================================================================ */

/**
 * Focus states for interactive elements
 */
.mobile-analytics-chart-controls .btn:focus,
.mobile-analytics-actions .btn:focus {
    outline: 2px solid var(--color-focus-ring, var(--color-primary-500, var(--color-primary-600, #2563EB)));
    outline-offset: 2px;
}

/**
 * Screen reader only content for charts
 */
.mobile-analytics-chart-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/**
 * Ensure sufficient color contrast for badges
 */
.mobile-analytics-flow-badge,
.mobile-analytics-platform-badge {
    border: 1px solid transparent;
}

[data-style="dark"] .mobile-analytics-flow-badge {
    border-color: var(--color-border-secondary, var(--color-neutral-300, #52525B));
}

/**
 * High contrast mode support
 */
@media (prefers-contrast: more) {
    .mobile-analytics-stat-card .card-icon i {
        opacity: 0.8;
    }

    .mobile-analytics-feature-progress,
    .mobile-analytics-performance-progress .progress {
        border: 1px solid currentColor;
    }

    .mobile-analytics-platform-badge {
        border: 2px solid currentColor;
    }
}

/**
 * Reduced motion support
 */
@media (prefers-reduced-motion: reduce) {
    .mobile-analytics-flow-item:hover,
    .mobile-analytics-chart-controls .btn {
        transition: none;
    }
}

/* ============================================================================
   PRINT STYLES
   ============================================================================ */

@media print {
    /**
     * Hide interactive controls when printing
     *
     * JUSTIFIED !important:
     * Print media queries require !important to override all other styles
     * and ensure interactive elements are hidden in printed documents.
     * This is a standard practice for print stylesheets.
     */
    .mobile-analytics-chart-controls,
    .mobile-analytics-actions {
        display: none !important;
    }

    /* Optimize chart sizes for print */
    .mobile-analytics-chart-engagement,
    .mobile-analytics-chart-platform {
        height: auto;
        max-height: 400px;
    }

    /* Ensure proper contrast for print */
    .mobile-analytics-stat-card .card-icon i {
        opacity: 1;
    }

    /**
     * Force black text for print
     *
     * JUSTIFIED !important:
     * Print media requires forcing black text color to ensure readability
     * on printed paper, overriding all theme and dark mode styles.
     * Standard print stylesheet practice for text legibility.
     */
    .mobile-analytics-screens-table th,
    .mobile-analytics-screens-table td,
    .mobile-analytics-flow-item span {
        color: var(--color-neutral-950, #000000) !important;
    }

    /**
     * Remove background colors for better print
     *
     * JUSTIFIED !important:
     * Print media requires removing backgrounds to save ink and ensure
     * proper contrast on white paper, overriding all component styles.
     * Standard print stylesheet practice for ink conservation.
     */
    .mobile-analytics-behavior-stat,
    .mobile-analytics-metric {
        background-color: transparent !important;
    }

    /* Ensure progress bars are visible in print */
    .mobile-analytics-feature-progress,
    .mobile-analytics-performance-progress .progress {
        border: 1px solid var(--color-neutral-950, #000000);
    }
}

/* ============================================================================
   END OF MOBILE-ANALYTICS.CSS
   ============================================================================ */
