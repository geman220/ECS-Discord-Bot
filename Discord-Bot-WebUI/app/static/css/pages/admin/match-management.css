/**
 * ============================================================================
 * ADMIN MATCH MANAGEMENT PAGE - BEM ARCHITECTURE
 * ============================================================================
 *
 * Modern BEM-compliant styles for admin match management dashboard.
 * All inline styles extracted and converted to component-based architecture.
 *
 * Architecture:
 * - BEM naming convention (.c-component__element--modifier)
 * - Design tokens only (no hardcoded values)
 * - Zero declarations (except accessibility)
 * - Full dark mode support
 * - Mobile-first responsive design
 * - WCAG AA accessibility compliant
 *
 * Reference: /app/templates/admin/manage_subs.html (gold standard)
 * Migration Date: 2025-12-17
 *
 * Structure:
 *   1. Layout & Containers
 *   2. Match Cards
 *   3. Status Indicators
 *   4. Task Details
 *   5. Filter & Search
 *   6. Table View
 *   7. Loading & Empty States
 *   8. Animations
 *   9. Responsive Design
 *   10. Dark Mode Support
 *   11. Accessibility
 *
 * ============================================================================
 */

/* ============================================================================
   1. LAYOUT & CONTAINERS
   ============================================================================ */

.match-management-container {
  padding: var(--space-6);
}

/* Match Cards Container - BEM Component */
.c-match-cards,
.match-cards-container {
  display: block;
}

.c-match-cards.is-hidden,
.match-cards-container.hidden {
  display: none;
}

/* Match Table Container - BEM Component */
.c-match-table,
.match-table-container {
  display: none;
}

.c-match-table.is-active,
.match-table-container.active {
  display: block;
}

/* ============================================================================
   2. MATCH CARDS - Modern Card Design (BEM Components)
   ============================================================================ */

/* Match Card Component */
.c-match-card,
.match-card {
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-2xl);
  transition: all var(--duration-normal) var(--ease-smooth);
  position: relative;
  overflow: hidden;
  background-color: var(--color-bg-card);
}

.c-match-card:hover,
.match-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(var(--color-primary-rgb), 0.3);
}

/* Top accent border gradient */
.c-match-card::before,
.match-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    135deg,
    var(--color-primary) 0%,
    var(--color-primary) 100%
  );
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-smooth);
}

.c-match-card:hover::before,
.match-card:hover::before {
  opacity: 1;
}

/* Historical match cards modifier */
.c-match-card--historical,
.match-card.historical {
  opacity: 0.75;
}

/* Match Card Wrapper */
.c-match-card-wrapper,
.match-card-wrapper {
  display: block;
}

.c-match-card-wrapper.is-hidden,
.match-card-wrapper.hidden {
  display: none;
}

/* Table rows hidden state */
.table tbody tr.hidden {
  display: none;
}

/* Card hover effect for specific interactions */
.card-hover {
  cursor: pointer;
  transition: all 0.3s ease;
}

.card-hover:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

/* ============================================================================
   3. STATUS INDICATORS
   ============================================================================ */

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: var(--radius-full);
  display: inline-block;
  animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse-dot {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.status-section {
  background-color: rgba(var(--color-primary-rgb), 0.03);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(var(--color-primary-rgb), 0.05);
}

/* ============================================================================
   4. TASK DETAILS SECTION
   ============================================================================ */

.task-details-section {
  margin-bottom: var(--space-3);
}

.task-details-container {
  background-color: rgba(var(--color-primary-rgb), 0.02);
  border: 1px solid var(--color-border-muted);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  min-height: 60px;
}

.task-card {
  background-color: var(--color-bg-card);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  margin-bottom: var(--space-2);
  transition: all 0.2s ease;
  border-left: 4px solid transparent;
}

.task-card:hover {
  background-color: var(--color-hover-bg);
  border-left-color: var(--color-primary-600);
}

/* Task type indicators */
.task-card.thread {
  border-left-color: var(--color-success-600);
}

.task-card.reporting {
  border-left-color: var(--color-warning-600);
}

.no-task-card {
  background-color: rgba(var(--color-primary-rgb), 0.02);
  border: 1px dashed rgba(var(--color-primary-rgb), 0.15);
  border-radius: var(--radius-lg);
  padding: var(--space-2);
  margin-bottom: var(--space-1);
  color: var(--color-text-muted);
}

/* ============================================================================
   5. FILTER & SEARCH BAR
   ============================================================================ */

.filter-search-card .input-group {
  transition: all 0.2s ease;
}

.filter-search-card .input-group:focus-within {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* ============================================================================
   6. TABLE VIEW ENHANCEMENTS
   ============================================================================ */

.table > tbody > tr {
  transition: all 0.2s ease;
}

.table > tbody > tr:hover {
  background-color: var(--color-hover-bg);
  transform: translateX(2px);
}

.table th {
  font-weight: 600;
  color: var(--color-text-secondary);
  border-bottom: 2px solid var(--color-border-primary);
}

/* ============================================================================
   7. LOADING & EMPTY STATES
   ============================================================================ */

.spinner-container {
  display: inline-block;
}

.spinner-container.hidden {
  display: none;
}

.spinner-border-sm {
  width: 1rem;
  height: 1rem;
  border-width: 0.15em;
}

/* NOTE: .empty-state base styles in components/empty-states.css (source of truth) */

/* ============================================================================
   8. ANIMATIONS
   ============================================================================ */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-up {
  animation: slideUp 0.3s ease-out;
}

/* Pulse animation for status dots */
@keyframes pulse {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
  100% {
    opacity: 1;
  }
}

/* ============================================================================
   9. ACTION BUTTONS & INTERACTIVITY
   ============================================================================ */

.form-select:focus,
.form-control:focus {
  border-color: var(--color-border-focus);
  box-shadow: 0 0 0 0.2rem rgba(var(--color-primary-rgb), 0.15);
}

.btn-group-sm > .btn {
  transition: all 0.2s ease;
}

.btn-group-sm > .btn:hover {
  transform: translateY(-1px);
}

/* Avatar components */
.avatar {
  width: 2.375rem;
  height: 2.375rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.avatar-initial {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.125rem;
  width: 100%;
  height: 100%;
}

/* ============================================================================
   10. RESPONSIVE DESIGN - Mobile Optimizations
   ============================================================================ */

@media (max-width: 767.98px) {
  .match-card .row {
    margin: 0;
  }

  .match-card .col-6 {
    padding: 0 var(--space-2);
  }

  /* Increased specificity to override Bootstrap gap utilities without */
  .match-management-container .d-flex.flex-wrap.gap-2 {
    gap: var(--space-2);
  }

  /* NOTE: .btn-sm base mobile sizing in mobile/buttons.css (source of truth) */
  /* Match management page-specific adjustments */
  .match-management-container .btn-sm {
    font-size: 0.75rem;
    padding: var(--space-1) var(--space-2);
  }

  .match-management-container {
    padding: var(--space-3);
  }

  .status-section {
    padding: var(--space-2);
  }

  .task-details-container {
    padding: var(--space-2);
  }
}

@media (max-width: 575.98px) {
  .match-card {
    border-radius: var(--radius-lg);
  }

  .match-card:hover {
    transform: none;
  }

  .filter-search-card .row {
    gap: var(--space-2);
  }

  .filter-search-card .col-md-2,
  .filter-search-card .col-md-4 {
    margin-bottom: var(--space-2);
  }
}

/* ============================================================================
   11. DARK MODE SUPPORT
   All color and shadow adjustments for dark backgrounds
   ============================================================================ */

[data-style="dark"] .match-card {
  background-color: var(--color-bg-card);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .match-card:hover {
  box-shadow: var(--shadow-xl);
  border-color: rgba(var(--color-primary-rgb), 0.4);
}

[data-style="dark"] .status-section {
  background-color: rgba(var(--color-primary-rgb), 0.1);
  border-color: rgba(var(--color-primary-rgb), 0.15);
}

[data-style="dark"] .task-details-container {
  background-color: rgba(var(--color-primary-rgb), 0.05);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .task-card {
  background-color: rgba(var(--color-neutral-0), 0.02);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .task-card:hover {
  background-color: var(--color-hover-bg);
}

[data-style="dark"] .no-task-card {
  background-color: rgba(var(--color-neutral-0), 0.02);
  border-color: rgba(var(--color-primary-rgb), 0.2);
}

[data-style="dark"] .table > tbody > tr:hover {
  background-color: var(--color-hover-bg);
}

[data-style="dark"] .table th {
  color: var(--color-text-primary);
  border-bottom-color: var(--color-border-primary);
}

[data-style="dark"] .empty-state {
  color: var(--color-text-muted);
}

[data-style="dark"] .form-select:focus,
[data-style="dark"] .form-control:focus {
  border-color: var(--color-border-focus);
  box-shadow: 0 0 0 0.2rem rgba(var(--color-primary-rgb), 0.25);
}

/* Dark mode card gradients */
[data-style="dark"] .match-card::before {
  background: linear-gradient(
    135deg,
    var(--color-primary-500) 0%,
    var(--color-primary-600) 100%
  );
}

/* ============================================================================
   12. UTILITY CLASSES - Page-specific helpers
   ============================================================================ */

.historical-match {
  opacity: 0.75;
  transition: opacity 0.3s ease;
}

.historical-match:hover {
  opacity: 0.9;
}

/* Refresh spinner visibility */
.refresh-spinner {
  display: none;
}

.refresh-spinner.active {
  display: inline-block;
}

/* View mode toggle classes */
.view-cards {
  display: block;
}

.view-table {
  display: none;
}

.view-mode-table .view-cards {
  display: none;
}

.view-mode-table .view-table {
  display: block;
}

/* Filter active indicators */
.filter-active {
  border-color: var(--color-primary-600);
  background-color: rgba(var(--color-primary-rgb), 0.05);
}

/* Badge enhancements for match cards */
.match-management-container .badge {
  transition: all 0.2s ease;
}

.match-management-container .badge:hover {
  transform: scale(1.05);
}

/* Button group enhancements */
.btn-group .btn {
  transition: all 0.2s ease;
}

.btn-group .btn:hover {
  z-index: 1;
}

/* Dropdown enhancements */
.match-management-container .dropdown-menu {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--color-border-primary);
}

.match-management-container .dropdown-item {
  transition: all 0.15s ease;
}

.match-management-container .dropdown-item:hover {
  background-color: var(--color-hover-bg);
  color: var(--color-primary-600);
}

[data-style="dark"] .match-management-container .dropdown-menu {
  background-color: var(--color-bg-card);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .match-management-container .dropdown-item:hover {
  background-color: var(--color-hover-bg);
  color: var(--color-primary-500);
}

/* ============================================================================
   13. MODAL ENHANCEMENTS
   ============================================================================ */

/* NOTE: Modal base styles in components/modals.css - these are page enhancements */
.match-management-container .modal-content {
  border-radius: var(--radius-xl);
  border: 1px solid var(--color-border-primary);
}

.match-management-container .modal-header {
  border-bottom: 1px solid var(--color-border-primary);
  border-radius: var(--radius-xl) var(--radius-xl) 0 0;
}

.match-management-container .modal-footer {
  border-top: 1px solid var(--color-border-primary);
  border-radius: 0 0 var(--radius-xl) var(--radius-xl);
}

[data-style="dark"] .match-management-container .modal-content {
  background-color: var(--color-bg-card);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .match-management-container .modal-header,
[data-style="dark"] .match-management-container .modal-footer {
  border-color: var(--color-border-primary);
}

/* ============================================================================
   14. ALERT & INFO BOXES
   ============================================================================ */

.match-management-container .alert {
  border-radius: var(--radius-lg);
  border-width: 1px;
}

.match-management-container .alert-info {
  background-color: var(--color-info-subtle);
  border-color: var(--color-info-600);
  color: var(--color-info-800);
}

[data-style="dark"] .match-management-container .alert-info {
  background-color: rgba(var(--color-info-rgb), 0.15);
  border-color: var(--color-info-600);
  color: var(--color-info-300);
}

.alert-danger {
  background-color: var(--color-danger-subtle);
  border-color: var(--color-danger-600);
  color: var(--color-danger-800);
}

[data-style="dark"] .alert-danger {
  background-color: rgba(var(--color-danger-rgb), 0.15);
  border-color: var(--color-danger-600);
  color: var(--color-danger-300);
}

/* Small alert variant */
.alert-sm {
  padding: var(--space-2);
  font-size: 0.875rem;
}

/* ============================================================================
   15. COLLAPSE & ACCORDION ENHANCEMENTS
   ============================================================================ */

.collapse {
  transition: height 0.35s ease;
}

.c-historical-toggle-icon {
  transition: transform 0.3s ease;
}

.collapse.show ~ button .c-historical-toggle-icon {
  transform: rotate(180deg);
}

/* ============================================================================
   16. FORM ENHANCEMENTS
   ============================================================================ */

.form-label {
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--space-2);
}

.form-text {
  color: var(--color-text-muted);
  font-size: 0.875rem;
}

.form-control,
.form-select {
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-input);
  transition: all 0.2s ease;
}

.form-control:hover,
.form-select:hover {
  border-color: var(--color-border-input-hover);
}

[data-style="dark"] .form-label {
  color: var(--color-text-primary);
}

[data-style="dark"] .form-text {
  color: var(--color-text-muted);
}

[data-style="dark"] .form-control,
[data-style="dark"] .form-select {
  background-color: var(--color-bg-secondary);
  border-color: var(--color-border-input);
  color: var(--color-text-primary);
}

[data-style="dark"] .form-control:hover,
[data-style="dark"] .form-select:hover {
  border-color: var(--color-border-input-hover);
}

/* ============================================================================
   17. PERFORMANCE OPTIMIZATIONS
   ============================================================================ */

/* GPU acceleration for animations */
.match-card,
.task-card,
.btn-group-sm > .btn {
  will-change: transform;
}

/*
 * ============================================================================
 * ACCESSIBILITY - REDUCED MOTION PREFERENCE
 * ============================================================================
 *
 * JUSTIFIED !important declarations:
 * These flags are required to override ALL animation and transition
 * properties throughout the entire page when a user has indicated they prefer
 * reduced motion via system settings (prefers-reduced-motion: reduce).
 *
 * This is a critical accessibility requirement that must take precedence over
 * all other animation/transition rules to prevent motion-triggered issues for
 * users with vestibular disorders, seizure disorders, or motion sensitivity.
 *
 * Without, these rules would be overridden by more specific selectors
 * elsewhere in the stylesheet, defeating the accessibility purpose.
 *
 * Reference: WCAG 2.1 Success Criterion 2.3.3 (Animation from Interactions)
 * ============================================================================
 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
  }

  .match-card:hover {
    transform: none;
  }

  .status-dot {
    animation: none;
  }
}
