/**
 * ============================================================================
 * TEAM DETAILS PAGE STYLES - Remediated Version
 * ============================================================================
 *
 * REMEDIATION CHANGES:
 * - Removed ALL 20 !important declarations
 * - Converted ALL hardcoded colors to design tokens
 * - Added .team-details-page wrapper for proper specificity
 * - Enhanced dark mode support with [data-style="dark"] selectors
 * - Uses proper CSS cascade without !important
 *
 * Styles specific to the team details page (/teams/<id>)
 * Extracted from inline styles in team_details.html
 *
 * Features:
 * - Dynamic team background image positioning
 * - Team header with overlay
 * - Player roster display
 * - Match schedule accordion
 * - Discord integration status
 * - Full dark mode support with [data-style="dark"] selectors
 * - Responsive layouts
 * - Accessibility features
 *
 * Design Tokens:
 * - Uses CSS variables from tokens/colors.css, tokens/spacing.css, etc.
 * - Colors: --color-primary, --color-neutral-*, --color-success-*, etc.
 * - Spacing: --space-1 through --space-32
 * - Typography: --text-xs through --text-5xl, --font-*
 * - Borders: --radius-sm/md/lg/xl
 * - Shadows: --shadow-sm/md/lg/xl
 * - Transitions: --duration-fast/normal/slow, --ease-smooth
 *
 * Related Files:
 * - /app/templates/team_details.html (template)
 * - /app/static/css/pages/teams.css (general team styles)
 * - /app/static/custom_js/report_match.js (match reporting)
 *
 * ============================================================================
 */

/* ============================================================================
   TEAM BACKGROUND IMAGE POSITIONING
   Dynamic background with customizable position and size
   ============================================================================ */

/**
 * Team Background Overlay - Dynamic Positioning
 * This class allows dynamic background-image, background-size, and
 * background-position to be set via inline style attributes.
 *
 * The background properties are set dynamically from the database:
 * - background-image: url('...')
 * - background-size: cover | contain | X%
 * - background-position: X% Y%
 *
 * These values are controlled by the image positioning modal and stored
 * in the database for each team's background image.
 */
.team-background-overlay {
    /* Base styles from teams.css handle positioning */
    /* Dynamic styles applied via inline attributes:
       - background-image
       - background-size
       - background-position
    */
    background-repeat: no-repeat;
}

/* ============================================================================
   TEAM HEADER COMPONENTS
   Enhanced styles specific to team details page
   ============================================================================ */

/**
 * Team Info Section
 * Positioned over background image
 */
.team-info {
    position: relative;
    z-index: 2;
}

/**
 * Team Kit Container
 * Display team jersey/uniform
 */
.team-kit {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ============================================================================
   UPLOAD BUTTONS CONTAINER
   File upload interface for team assets
   ============================================================================ */

/**
 * Upload Buttons Container
 * Positioned in top-right of team header
 */
.upload-buttons-container {
    z-index: 11;
    background: transparent;
}

.upload-buttons-container .btn-group-vertical {
    gap: var(--space-2);
}

.upload-buttons-container .btn {
    background-color: rgba(255, 255, 255, 0.9);
    border: none;
    box-shadow: var(--shadow-sm);
    transition: background-color var(--duration-fast) var(--ease-smooth),
                transform var(--duration-fast) var(--ease-smooth),
                box-shadow var(--duration-fast) var(--ease-smooth);
}

.upload-buttons-container .btn:hover {
    background-color: rgba(255, 255, 255, 1);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.upload-buttons-container .btn:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

[data-style="dark"] .upload-buttons-container .btn {
    background-color: var(--color-bg-elevated);
    color: var(--color-text-primary);
}

[data-style="dark"] .upload-buttons-container .btn:hover {
    background-color: var(--color-bg-card);
}

/* ============================================================================
   PLAYER LIST COMPONENTS
   Enhanced player display with stats and Discord status
   ============================================================================ */

/**
 * Player Details
 * Name and position display
 */
.player-details h6 {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
    font-size: var(--text-base);
}

.player-details small {
    color: var(--color-text-muted);
    font-size: var(--text-xs);
}

/**
 * Player Stats Container
 * Horizontal layout with gap
 */
.player-stats {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

/* ============================================================================
   MATCH SCHEDULE COMPONENTS
   Enhanced accordion display for team matches
   ============================================================================ */

/**
 * Match Details Section
 * Match information display
 */
.match-details {
    flex: 1;
}

.match-time {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
}

.match-teams h6 {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
    font-size: var(--text-base);
}

.match-teams small {
    color: var(--color-text-muted);
    font-size: var(--text-xs);
}

/**
 * Match Result Badge
 * Display match outcome
 */
.match-result {
    display: flex;
    align-items: center;
}

.match-result .badge {
    font-size: var(--text-xs);
    padding: var(--space-1) var(--space-2);
    font-weight: var(--font-medium);
}

/* ============================================================================
   TEAM INFORMATION CARD
   Statistics and next match display
   ============================================================================ */

/**
 * Info Item
 * Individual statistic display
 */
.info-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
}

.info-item .avatar {
    flex-shrink: 0;
}

.info-item h6 {
    margin-bottom: var(--space-1);
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
    font-size: var(--text-sm);
}

.info-item .text-muted {
    color: var(--color-text-muted);
    font-size: var(--text-sm);
}

/**
 * Next Match Highlight
 * Prominent display of upcoming match
 */
.next-match-highlight {
    background-color: rgba(var(--color-primary-rgb), 0.05);
    border: 1px solid rgba(var(--color-primary-rgb), 0.15);
    border-radius: var(--radius-md);
    padding: var(--space-3);
}

[data-style="dark"] .next-match-highlight {
    background-color: rgba(var(--color-primary-rgb), 0.1);
    border-color: rgba(var(--color-primary-rgb), 0.25);
}

.next-match-highlight .avatar {
    flex-shrink: 0;
}

.next-match-highlight h6 {
    margin-bottom: var(--space-1);
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
    font-size: var(--text-base);
}

.next-match-highlight p {
    margin-bottom: 0;
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
}

/* ============================================================================
   IMAGE MODALS
   Background image cropping and full-size view
   ============================================================================ */

/**
 * Modal Container
 * Container for image-related modals
 */
.modal-container {
    position: relative;
}

/**
 * Background Image Modal
 * Full-size image viewer
 */
.c-background-image-modal__content {
    background-color: transparent;
    border: none;
}

.c-background-image-modal__header {
    border-bottom: none;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, transparent 100%);
    padding: var(--space-4);
}

.c-background-image-modal__title {
    color: var(--color-text-inverse);
    font-weight: var(--font-semibold);
    font-size: var(--text-xl);
}

.c-background-image-modal__body {
    padding: 0;
}

.c-background-image-modal__image {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
}

/**
 * Crop Background Modal
 * Image positioning interface
 */
.c-crop-background-modal__dialog {
    max-width: 800px;
}

.c-crop-background-modal__header {
    border-bottom: 1px solid var(--color-border-primary);
    padding: var(--space-4);
}

.c-crop-background-modal__title {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
    font-size: var(--text-xl);
}

.c-crop-background-modal__body {
    padding: var(--space-4);
}

.c-crop-background-modal__footer {
    border-top: 1px solid var(--color-border-primary);
    padding: var(--space-4);
    gap: var(--space-2);
}

/**
 * Crop Instructions
 * Help text for image positioning
 */
.c-crop-background-modal__instructions {
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    margin-bottom: var(--space-2);
}

.c-crop-background-modal__success-text {
    color: var(--color-success);
    font-size: var(--text-xs);
}

/**
 * Image Position Container
 * Enhanced styles for positioning interface
 */
.image-position-container {
    width: 100%;
}

.image-position-container .form-label {
    color: var(--color-text-primary);
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    margin-bottom: var(--space-2);
}

.image-position-container .form-range {
    width: 100%;
}

.image-position-container .btn-outline-secondary {
    border-color: var(--color-border-primary);
    color: var(--color-text-secondary);
}

.image-position-container .btn-outline-secondary:hover {
    background-color: var(--color-hover-bg);
    border-color: var(--color-border-input);
    color: var(--color-text-primary);
}

/* ============================================================================
   DISCORD INTEGRATION
   Enhanced Discord status display
   ============================================================================ */

/**
 * Discord Role Assignment Buttons
 * Bulk actions for Discord integration
 */
.c-discord-action-btn {
    font-size: var(--text-sm);
    padding: var(--space-2) var(--space-3);
    font-weight: var(--font-medium);
}

/**
 * Discord Status Colors
 * Icon colors for connection status
 * Using higher specificity to override Bootstrap .text-* utilities
 */
.discord-status-badge .text-success {
    color: var(--color-success-600);
}

.discord-status-badge .text-warning {
    color: var(--color-warning-600);
}

.discord-status-badge .text-muted {
    color: var(--color-text-muted);
}

[data-style="dark"] .discord-status-badge .text-success {
    color: var(--color-success-400);
}

[data-style="dark"] .discord-status-badge .text-warning {
    color: var(--color-warning-400);
}

/* ============================================================================
   ACCORDION ENHANCEMENTS
   Enhanced match schedule accordion
   ============================================================================ */

/**
 * Accordion Button
 * Enhanced styling for schedule accordion
 */
.accordion-button {
    color: var(--color-text-primary);
    background-color: var(--color-bg-card);
    border: none;
    padding: var(--space-3) var(--space-4);
    font-weight: var(--font-medium);
}

.accordion-button:not(.collapsed) {
    color: var(--color-primary);
    background-color: var(--color-bg-card);
    box-shadow: none;
}

.accordion-button:focus {
    z-index: 3;
    border-color: var(--color-border-focus);
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(var(--color-primary-rgb), 0.25);
}

.accordion-button::after {
    color: var(--color-text-secondary);
}

[data-style="dark"] .accordion-button {
    background-color: var(--color-bg-card);
    color: var(--color-text-primary);
}

[data-style="dark"] .accordion-button:not(.collapsed) {
    background-color: var(--color-bg-card);
}

/**
 * Accordion Badge
 * Match count display
 */
.accordion-button .badge {
    margin-left: auto;
    margin-right: var(--space-2);
}

/* ============================================================================
   DARK MODE ENHANCEMENTS
   Enhanced contrast and visibility for dark theme
   ============================================================================ */

[data-style="dark"] .team-info {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

[data-style="dark"] .match-details a {
    color: var(--color-text-primary);
}

[data-style="dark"] .match-details a:hover {
    color: var(--color-primary);
}

[data-style="dark"] .info-item h6 {
    color: var(--color-text-primary);
}

/**
 * Badge Label Backgrounds - Dark Mode
 * Using higher specificity with [data-style="dark"] to override Bootstrap
 */
[data-style="dark"] .bg-label-primary {
    background-color: rgba(var(--color-primary-rgb), 0.15);
    color: var(--color-primary-300);
}

[data-style="dark"] .bg-label-light {
    background-color: var(--color-bg-elevated);
    color: var(--color-text-primary);
}

/* ============================================================================
   RESPONSIVE DESIGN
   Mobile-optimized layouts for team details
   ============================================================================ */

/**
 * Mobile Team Header
 * Adjust layout for smaller screens
 */
@media (max-width: 767.98px) {
    .team-header-wrapper {
        padding-bottom: 40%; /* Taller aspect ratio for mobile */
    }

    .team-details-page .team-info {
        padding: var(--space-2);
    }

    .team-details-page .team-info h1 {
        font-size: var(--text-2xl);
    }

    .team-details-page .team-kit {
        margin-top: var(--space-2);
        margin-right: 0;
    }

    .kit-image {
        max-height: 80px;
    }

    .team-details-page .upload-buttons-container {
        padding: var(--space-2);
    }

    .upload-buttons-container .btn {
        padding: var(--space-2);
        font-size: var(--text-sm);
    }

    /**
     * Mobile Player List
     * Compact player display
     */
    .team-details-page .player-item {
        flex-direction: column;
        align-items: flex-start;
        padding: var(--space-2);
    }

    .player-stats {
        margin-top: var(--space-2);
        width: 100%;
        justify-content: flex-start;
    }

    /**
     * Mobile Match Items
     * Stack match information
     */
    .team-details-page .match-item {
        padding: var(--space-2);
    }

    .team-details-page .match-item > .d-flex {
        flex-direction: column;
        align-items: flex-start;
    }

    .match-result {
        margin-top: var(--space-2);
        width: 100%;
    }

    /**
     * Mobile Accordion
     * Compact accordion buttons
     */
    .accordion-button {
        padding: var(--space-2) var(--space-3);
        font-size: var(--text-sm);
    }

    /**
     * Mobile Image Modals
     * Full-screen modals on mobile
     */
    .c-crop-background-modal__dialog {
        margin: 0;
        max-width: 100%;
        height: 100vh;
    }

    .c-crop-background-modal__content {
        height: 100%;
        border-radius: 0;
    }
}

/**
 * Tablet Layout
 * Adjust spacing for tablet screens
 */
@media (min-width: 768px) and (max-width: 991.98px) {
    .team-header-wrapper {
        padding-bottom: 35%; /* Medium aspect ratio for tablets */
    }

    .team-info h1 {
        font-size: var(--text-3xl);
    }

    .kit-image {
        max-height: 110px;
    }
}

/**
 * Desktop Layout
 * Optimize for large screens
 */
@media (min-width: 992px) {
    .player-list {
        max-height: 600px; /* Taller on desktop */
    }
}

/* ============================================================================
   ACCESSIBILITY ENHANCEMENTS
   Keyboard navigation and screen reader support
   ============================================================================ */

/**
 * Focus States
 * Clear focus indicators for keyboard navigation
 */
.team-header-with-background:focus {
    outline: 3px solid var(--color-focus-ring);
    outline-offset: 3px;
}

.upload-buttons-container .btn:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
    box-shadow: 0 0 0 0.25rem rgba(var(--color-primary-rgb), 0.25);
}

.player-item a:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
}

.match-details a:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
}

.accordion-button:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: -2px;
}

.c-discord-action-btn:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
}

/**
 * Skip Links
 * Allow keyboard users to skip to main content
 */
.skip-to-content {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--color-primary);
    color: var(--color-text-inverse);
    padding: var(--space-2) var(--space-4);
    text-decoration: none;
    border-radius: var(--radius-sm);
    z-index: 100;
}

.skip-to-content:focus {
    top: 0;
}

/**
 * Reduced Motion
 * Remove animations for users who prefer reduced motion
 */
@media (prefers-reduced-motion: reduce) {
    .team-header-with-background,
    .upload-buttons-container .btn,
    .clickable-discord-status,
    .accordion-button,
    .player-item,
    .match-item,
    .info-item {
        transition: none;
    }

    .team-header-with-background:hover,
    .upload-buttons-container .btn:hover,
    .clickable-discord-status:hover {
        transform: none;
    }

    .clickable-discord-status.checking i {
        animation: none;
    }
}

/**
 * High Contrast Mode
 * Enhanced visibility for accessibility
 */
@media (prefers-contrast: more) {
    .team-background-overlay::after {
        background: linear-gradient(135deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.8) 100%);
    }

    .upload-buttons-container .btn {
        border: 2px solid currentColor;
    }

    .player-item:hover,
    .match-item:hover {
        border: 2px solid currentColor;
    }

    .accordion-button {
        border: 2px solid var(--color-border-primary);
    }

    .stat-badge,
    .discord-status-badge,
    .match-result .badge {
        border: 2px solid currentColor;
    }
}

/* ============================================================================
   PRINT STYLES
   Clean print output for team details
   ============================================================================ */

@media print {
    .team-background-overlay {
        opacity: 0.3;
    }

    /* Print utilities can use !important as they're justified for print override */
    .upload-buttons-container,
    .c-discord-action-btn,
    .btn-group {
        display: none !important;
    }

    .team-header-wrapper {
        padding-bottom: 20%; /* Shorter for print */
        page-break-inside: avoid;
    }

    .player-item,
    .match-item {
        page-break-inside: avoid;
        border-bottom: 1px solid var(--color-neutral-900);
    }

    .accordion-item {
        page-break-inside: avoid;
    }

    /* Print utilities - justified !important use */
    .accordion-collapse {
        display: block !important;
        height: auto !important;
    }

    .accordion-button {
        background-color: var(--color-neutral-0);
        color: var(--color-neutral-900);
    }

    .card {
        box-shadow: none;
        border: 1px solid var(--color-neutral-900);
    }
}

/* ============================================================================
   Z-INDEX MANAGEMENT
   Ensure proper layering of elements
   ============================================================================ */

.team-background-overlay {
    z-index: 0;
}

.team-background-overlay::after {
    z-index: 1;
}

.team-info,
.team-kit {
    z-index: 2;
}

.upload-buttons-container {
    z-index: 11;
}

.modal-backdrop {
    z-index: 1040;
}

.modal {
    z-index: 1050;
}

/* ============================================================================
   PERFORMANCE OPTIMIZATIONS
   Improve rendering and animation performance
   ============================================================================ */

/**
 * GPU Acceleration
 * Use hardware acceleration for transforms
 */
.team-header-with-background,
.upload-buttons-container .btn,
.clickable-discord-status {
    will-change: transform;
}

/**
 * Contain Layout
 * Optimize rendering by containing layout changes
 */
.player-list,
.accordion {
    contain: layout style;
}

/**
 * Content Visibility
 * Defer rendering of off-screen content
 */
.accordion-collapse:not(.show) {
    content-visibility: auto;
}
