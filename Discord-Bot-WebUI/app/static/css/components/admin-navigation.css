/**
 * ============================================================================
 * ADMIN NAVIGATION COMPONENT
 * ============================================================================
 *
 * Modern, production-ready admin navigation following architectural standards:
 * - BEM naming convention (c-admin-nav)
 * - Minimal !important usage (only for display:block on dropdown visibility)
 * - CSS variables with hardcoded fallbacks for theme support
 * - Design tokens for all values
 * - State-driven styling (is-* classes)
 * - Mobile-first responsive
 * - Proper z-index layering with isolated stacking context
 * - Event delegation compatible
 * - Full theme support (modern light/dark)
 *
 * JS Hooks: data-action, data-nav-item, data-dropdown-toggle
 * States: is-open, is-active, is-collapsed
 *
 * Z-Index Strategy:
 *   - Nav container: z-index: 100 (above page content, below navbar)
 *   - Nav items: z-index: 1 (base) / z-index: 1001 (when .is-open)
 *   - Dropdowns: z-index: 1000 (appears above all page content)
 *   - This ensures dropdowns appear above page content during horizontal scroll
 *   - Modals/toasts remain above at z-index: 1050+
 *
 * ============================================================================
 */

/* ============================================================================
   BASE NAVIGATION CONTAINER
   Mobile-first: vertical stack by default
   Creates isolated stacking context for dropdown management
   ============================================================================ */

.c-admin-nav {
  /* Stacking Context - High z-index for dropdowns to appear above page content */
  position: relative;
  z-index: 100; /* Above page content but below modals (1050) */
  isolation: isolate;

  /* Layout */
  width: 100%;

  /* Visual - Light mode defaults */
  background-color: var(--color-bg-elevated, #ffffff);
  border: var(--border-width, 1px) solid var(--color-border-primary, #e4e4e7);
  border-radius: var(--radius-lg, 0.5rem);
  box-shadow: var(--shadow-sm, 0 1px 2px rgba(0, 0, 0, 0.05));

  /* Spacing */
  padding: var(--space-3, 0.75rem);

  /* Ensure dropdowns can overflow */
  overflow: visible;
}

/* ============================================================================
   THEME INTEGRATION - Modern Theme Support
   Uses the same selectors as modern-dark.css and modern-light.css
   ============================================================================ */

/* Modern Theme - Light Mode */
[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav {
  background-color: var(--ecs-neutral-0, #ffffff);
  border-color: var(--ecs-neutral-20, #e4e4e7);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

/* Modern Theme - Dark Mode - use semantic tokens */
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav {
  background-color: var(--color-bg-elevated, #334155);
  border-color: var(--color-border-primary, #475569);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Generic Dark Mode Fallbacks (non-modern themes)
   NOTE: Do NOT use --color-neutral-* tokens - they are INVERTED in dark mode!
   Use semantic tokens like --color-bg-elevated which resolve correctly */
[data-style="dark"] .c-admin-nav,
[data-theme="dark"] .c-admin-nav,
.dark-mode .c-admin-nav,
body[data-style="dark"] .c-admin-nav {
  background-color: var(--color-bg-elevated, #334155);
  border-color: var(--color-border-primary, #475569);
}

/* ============================================================================
   NAVIGATION LIST
   Flex container for nav items
   ============================================================================ */

.c-admin-nav__list {
  /* Reset */
  list-style: none;
  margin: 0;
  padding: 0;

  /* Layout - Mobile: vertical stack */
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

/* Desktop: horizontal layout */
@media (min-width: 992px) {
  .c-admin-nav__list {
    flex-direction: row;
    flex-wrap: wrap; /* Allow wrapping instead of scrolling - prevents dropdown clipping */
    align-items: center;
    gap: var(--space-1);
    /* REMOVED overflow-x: auto - it clips absolutely positioned dropdowns */
    overflow: visible;
  }

  /* When a dropdown is open, ensure nothing clips it */
  .c-admin-nav__list:has(.is-open) {
    overflow: visible;
  }

}

/* ============================================================================
   NAVIGATION ITEMS
   Individual nav items (links or dropdowns)

   Z-Index Strategy for Open Dropdowns:
   - When a dropdown is open, the entire item (including toggle button) must
     be elevated above sibling items
   - This prevents the parent button from being hidden when horizontally
     scrolling while a dropdown is open
   - Uses z-index: 2 for open items (above siblings at z-index: 1)
   - Dropdown menu uses z-index: 10 within the elevated item's context
   ============================================================================ */

.c-admin-nav__item {
  /* Layout */
  position: relative;
  flex-shrink: 0;

  /* No z-index on closed items - let normal stacking apply */
}

/* Elevate item above siblings when its dropdown is open */
.c-admin-nav__item.is-open {
  z-index: 100; /* Above sibling nav items so dropdown isn't clipped */
}

/* ============================================================================
   NAVIGATION LINKS
   Clickable nav links with icons
   Use full BEM path for higher specificity without !important
   ============================================================================ */

.c-admin-nav .c-admin-nav__list .c-admin-nav__link {
  /* Layout */
  display: flex;
  align-items: center;
  gap: var(--space-2);

  /* Spacing */
  padding: var(--space-3) var(--space-4);

  /* Typography */
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--color-text-secondary);
  text-decoration: none;
  white-space: nowrap;

  /* Visual */
  background-color: transparent;
  border-radius: var(--radius-md);
  border: 1px solid transparent;

  /* Reset any button styles that might conflict */
  box-shadow: none;
  text-transform: none;
  letter-spacing: normal;
  min-width: auto;
  width: auto;
  height: auto;

  /* Interaction */
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-smooth);
  user-select: none;
}

/* Desktop: more compact */
@media (min-width: 992px) {
  .c-admin-nav .c-admin-nav__list .c-admin-nav__link {
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-xs);
  }
}

/* Hover state */
.c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover {
  background-color: var(--color-primary-subtle, rgba(37, 99, 235, 0.1));
  color: var(--color-primary, #2563EB);
}

/* Active state */
.c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active {
  background-color: var(--color-primary, #2563EB);
  color: var(--color-text-on-primary, #ffffff);
  font-weight: var(--font-semibold, 600);
}

/* Focus state for accessibility */
.c-admin-nav .c-admin-nav__list .c-admin-nav__link:focus-visible {
  outline: 2px solid var(--color-primary, #2563EB);
  outline-offset: 2px;
}

/* ============================================================================
   NAVIGATION LINKS - Modern Theme Light Mode
   Improved contrast: #3F3F46 gives 9.6:1 ratio (WCAG AAA compliant)
   ============================================================================ */

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link {
  color: var(--color-text-secondary, #3F3F46);
}

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover {
  background-color: rgba(var(--ecs-primary-rgb, 37, 99, 235), 0.08);
  color: var(--ecs-primary, #2563EB);
}

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active {
  background-color: var(--ecs-primary, #2563EB);
  color: var(--ecs-neutral-0, #ffffff);
}

/* ============================================================================
   NAVIGATION LINKS - Modern Theme Dark Mode
   ============================================================================ */

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link {
  color: var(--ecs-dark-text-muted, #a1a1aa);
}

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover {
  background-color: rgba(96, 165, 250, 0.15);
  color: var(--ecs-primary-light, #60A5FA);
}

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active {
  background-color: var(--ecs-primary-light, #60A5FA);
  color: var(--ecs-dark-bg-body, #09090b);
}

/* Generic dark mode fallbacks */
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link,
[data-theme="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link,
.dark-mode .c-admin-nav .c-admin-nav__list .c-admin-nav__link,
body[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link {
  color: var(--color-neutral-400, #a1a1aa);
}

[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover,
[data-theme="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover,
.dark-mode .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover,
body[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link:hover {
  background-color: rgba(96, 165, 250, 0.15);
  color: var(--color-primary-400, #60A5FA);
}

[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active,
[data-theme="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active,
.dark-mode .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active,
body[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__link.is-active {
  background-color: var(--color-primary-600, #60A5FA);
  color: var(--color-text-on-primary, #ffffff);
}

/* ============================================================================
   NAVIGATION ICONS
   Icons within nav links
   ============================================================================ */

.c-admin-nav__icon {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;

  /* Size */
  width: 1.25rem;
  height: 1.25rem;

  /* Typography */
  font-size: 1.125rem;
}

/* ============================================================================
   NAVIGATION TEXT
   Text labels in nav links
   ============================================================================ */

.c-admin-nav__text {
  /* Typography */
  font-size: inherit;
  line-height: var(--leading-tight);
}

/* Hide text on small tablets to save space */
@media (min-width: 768px) and (max-width: 991px) {
  .c-admin-nav__text {
    display: none;
  }
}

/* ============================================================================
   DROPDOWN TOGGLES
   Nav items that open dropdown menus
   ============================================================================ */

.c-admin-nav__dropdown-toggle {
  /* Extends .c-admin-nav__link styles */
  position: relative;
}

/* Dropdown arrow indicator */
.c-admin-nav .c-admin-nav__dropdown-toggle::after {
  content: '';
  display: inline-block;
  margin-left: var(--space-1);
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid currentColor;
  transition: transform var(--duration-fast) var(--ease-smooth);
}

/* Open state - rotate arrow */
.c-admin-nav .c-admin-nav__dropdown-toggle.is-open::after {
  transform: rotate(180deg);
}

/* ============================================================================
   DROPDOWN MENUS
   Submenu containers with proper z-index management

   Z-Index Strategy:
   - Dropdowns use z-index: 10 within the nav's isolated stacking context
   - This ensures they appear above sibling nav items
   - But don't conflict with page-level modals/toasts (z-index: 1050+)
   ============================================================================ */

.c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
  /* Hidden by default */
  display: none;

  /* Layout - Position relative to parent item */
  position: absolute;
  top: calc(100% + var(--space-1, 0.25rem));
  left: 0;
  min-width: 14rem;
  max-width: 22rem;

  /* Visual - Light mode defaults */
  background-color: var(--color-bg-elevated, #ffffff);
  border: var(--border-width, 1px) solid var(--color-border-primary, #e4e4e7);
  border-radius: var(--radius-md, 0.375rem);
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);

  /* Z-index - Within parent's stacking context, appear above siblings */
  z-index: 10;

  /* Spacing */
  padding: var(--space-2, 0.5rem) 0;

  /* Reset list styles */
  list-style: none;
  margin: 0;
}

/* Show when parent has is-open - using !important to override any conflicting display:none */
.c-admin-nav .c-admin-nav__item.is-open > .c-admin-nav__dropdown {
  display: block !important;
  animation: adminNavDropdownFadeIn var(--duration-normal, 200ms) var(--ease-smooth, ease-out);
}

/* Fallback: Show dropdown when toggle has aria-expanded="true" */
.c-admin-nav .c-admin-nav__item [aria-expanded="true"] + .c-admin-nav__dropdown,
.c-admin-nav [data-dropdown].is-open .c-admin-nav__dropdown,
nav.c-admin-nav .c-admin-nav__list .c-admin-nav__item.is-open > ul.c-admin-nav__dropdown {
  display: block !important;
}

/* Animation - Scoped to admin nav */
@keyframes adminNavDropdownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================================================
   DROPDOWN MENUS - Modern Theme Light Mode
   ============================================================================ */

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
  background-color: var(--ecs-neutral-0, #ffffff);
  border-color: var(--ecs-neutral-20, #e4e4e7);
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* ============================================================================
   DROPDOWN MENUS - Modern Theme Dark Mode
   Using CSS variables with hardcoded fallbacks
   ============================================================================ */

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
  background-color: var(--color-bg-elevated, #334155);
  border-color: var(--color-border-primary, #475569);
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.4),
    0 4px 6px -2px rgba(0, 0, 0, 0.3);
}

/* Generic dark mode fallbacks - using CSS variables with hardcoded fallbacks */
[data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
[data-theme="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
.dark-mode .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
body[data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
  background-color: var(--color-bg-elevated, #334155);
  border-color: var(--color-border-primary, #475569);
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.4),
    0 4px 6px -2px rgba(0, 0, 0, 0.3);
}

/* Mobile: full width dropdown (inline, not absolute) */
@media (max-width: 991px) {
  .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
    position: static;
    width: 100%;
    margin-top: var(--space-1, 0.25rem);
    box-shadow: none;
    border: none;
    border-left: 2px solid var(--color-primary, #2563EB);
    border-radius: 0;
    margin-left: var(--space-4, 1rem);
    padding-left: var(--space-2, 0.5rem);
    background-color: transparent;
  }

  /* Dark mode mobile dropdown border - using CSS variables with fallbacks */
  [data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
  [data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
  html[data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown,
  body[data-style="dark"] .c-admin-nav .c-admin-nav__item .c-admin-nav__dropdown {
    border-left-color: var(--color-primary, #60A5FA);
    background-color: var(--color-bg-primary, #0F172A);
  }
}

/* ============================================================================
   DROPDOWN ITEMS
   Individual items within dropdown menus
   ============================================================================ */

.c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item {
  /* Layout */
  display: flex;
  align-items: center;
  gap: var(--space-2, 0.5rem);

  /* Spacing */
  padding: var(--space-2, 0.5rem) var(--space-4, 1rem);

  /* Typography */
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-normal, 400);
  color: var(--color-text-primary, #18181b);
  text-decoration: none;
  white-space: nowrap;

  /* Interaction */
  cursor: pointer;
  transition: all var(--duration-fast, 150ms) var(--ease-smooth, ease-out);
}

/* Dropdown item icons */
.c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item i {
  font-size: 1rem;
  opacity: 0.7;
  transition: opacity var(--duration-fast, 150ms) var(--ease-smooth, ease-out);
}

.c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover i {
  opacity: 1;
}

/* Hover state */
.c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover {
  background-color: var(--color-primary-subtle, rgba(37, 99, 235, 0.1));
  color: var(--color-primary, #2563EB);
}

/* Active state */
.c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item.is-active {
  background-color: var(--color-primary, #2563EB);
  color: var(--color-text-on-primary, #ffffff);
}

/* ============================================================================
   DROPDOWN ITEMS - Modern Theme Light Mode
   ============================================================================ */

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item {
  color: var(--ecs-neutral-70, #3f3f46);
}

[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover {
  background-color: rgba(var(--ecs-primary-rgb, 37, 99, 235), 0.08);
  color: var(--ecs-primary, #2563EB);
}

/* ============================================================================
   DROPDOWN ITEMS - Modern Theme Dark Mode
   Use semantic tokens with proper fallbacks
   ============================================================================ */

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item {
  color: var(--color-text-secondary, #d4d4d8);
}

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover {
  background-color: rgba(96, 165, 250, 0.2);
  color: var(--color-primary-400, #60A5FA);
}

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item.is-active,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item.is-active {
  background-color: var(--color-primary-400, #60A5FA);
  color: var(--color-bg-primary, #09090b);
}

/* Generic dark mode fallbacks - use semantic tokens NOT inverted neutral scale */
[data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item,
[data-theme="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item,
.dark-mode .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item,
body[data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item {
  color: var(--color-text-secondary, #d4d4d8);
}

[data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover,
[data-theme="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover,
.dark-mode .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover,
body[data-style="dark"] .c-admin-nav .c-admin-nav__dropdown .c-admin-nav__dropdown-item:hover {
  background-color: rgba(96, 165, 250, 0.2);
  color: var(--color-primary-400, #60A5FA);
}

/* ============================================================================
   DROPDOWN DIVIDERS
   Separators within dropdown menus
   ============================================================================ */

.c-admin-nav__dropdown-divider {
  /* Layout */
  height: 1px;
  margin: var(--space-2, 0.5rem) 0;

  /* Visual */
  background-color: var(--color-border-primary, #e4e4e7);
  border: none;
}

/* Modern Theme Light Mode divider */
[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav__dropdown-divider,
html[data-theme-variant="modern"]:not([data-style="dark"]) .c-admin-nav__dropdown-divider {
  background-color: var(--ecs-neutral-20, #e4e4e7);
}

/* Modern Theme Dark Mode divider */
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav__dropdown-divider,
html[data-theme-variant="modern"][data-style="dark"] .c-admin-nav__dropdown-divider {
  background-color: var(--color-border-primary, #52525b);
}

/* Generic dark mode fallback - use semantic tokens */
[data-style="dark"] .c-admin-nav__dropdown-divider,
[data-theme="dark"] .c-admin-nav__dropdown-divider {
  background-color: var(--color-border-primary, #3f3f46);
}

/* ============================================================================
   DROPDOWN HEADERS
   Section headers within dropdown menus (for organized mega-menus)
   ============================================================================ */

.c-admin-nav__dropdown-header {
  /* Spacing */
  padding: var(--space-2, 0.5rem) var(--space-4, 1rem);
  margin-top: var(--space-2, 0.5rem);

  /* Typography */
  font-size: 0.6875rem;
  font-weight: var(--font-bold, 700);
  color: var(--color-text-muted, #71717a);
  text-transform: uppercase;
  letter-spacing: 0.05em;

  /* Not clickable */
  pointer-events: none;
  user-select: none;
}

/* First header doesn't need top margin */
.c-admin-nav__dropdown-header:first-child {
  margin-top: 0;
}

/* Dark mode dropdown headers */
[data-style="dark"] .c-admin-nav__dropdown-header,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav__dropdown-header {
  color: var(--color-text-muted, #a1a1aa);
}

/* ============================================================================
   WIDE DROPDOWN VARIANT
   For dropdowns with section headers (organized mega-menu style)
   ============================================================================ */

.c-admin-nav__dropdown--wide {
  min-width: 16rem;
  max-width: 20rem;
  max-height: 70vh;
  overflow-y: auto;
}

/* Scrollbar styling for wide dropdowns */
.c-admin-nav__dropdown--wide::-webkit-scrollbar {
  width: 6px;
}

.c-admin-nav__dropdown--wide::-webkit-scrollbar-track {
  background: transparent;
}

.c-admin-nav__dropdown--wide::-webkit-scrollbar-thumb {
  background-color: var(--color-border-primary, #e4e4e7);
  border-radius: 3px;
}

[data-style="dark"] .c-admin-nav__dropdown--wide::-webkit-scrollbar-thumb {
  background-color: var(--color-border-primary, #52525b);
}

/* ============================================================================
   ACCESSIBILITY FEATURES
   ============================================================================ */

/* Skip navigation link - Use clip method instead of !important */
.c-admin-nav__skip {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Visible on focus - proper method without !important */
.c-admin-nav__skip:focus {
  position: fixed;
  top: var(--space-2);
  left: var(--space-2);
  width: auto;
  height: auto;
  padding: var(--space-2) var(--space-4);
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
  background: var(--color-primary);
  color: white;
  text-decoration: none;
  border-radius: var(--radius-md);
  z-index: var(--z-tooltip);
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  .c-admin-nav__link,
  .c-admin-nav__dropdown-item {
    border: 1px solid transparent;
  }

  .c-admin-nav__link:hover,
  .c-admin-nav__link:focus,
  .c-admin-nav__dropdown-item:hover {
    border-color: currentColor;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .c-admin-nav__link,
  .c-admin-nav__dropdown-item,
  .c-admin-nav__dropdown-toggle::after,
  .c-admin-nav__dropdown {
    transition: none;
    animation: none;
  }
}

/* ============================================================================
   UTILITY STATES
   Global state classes that can be applied to any nav element
   ============================================================================ */

/* Loading state */
.c-admin-nav.is-loading {
  pointer-events: none;
  opacity: 0.6;
}

/* Collapsed state (mobile menu) */
.c-admin-nav.is-collapsed .c-admin-nav__list {
  display: none;
}

/* Disabled state */
.c-admin-nav__link.is-disabled,
.c-admin-nav__dropdown-item.is-disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================================================
   SPECIFICITY PROTECTION
   Reset conflicting styles from other CSS that might be applied
   These use higher specificity BEM paths to override external styles
   ============================================================================ */

/*
 * Reset any button framework styles (.ecs-btn, .btn, etc.)
 * that might be accidentally applied to the nav toggle buttons.
 * Uses high specificity path without !important.
 */
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link {
  /* Reset button framework defaults */
  background-color: transparent;
  background-image: none;
  border: 1px solid transparent;
  border-radius: var(--radius-md, 0.375rem);
  box-shadow: none;
  text-transform: none;
  letter-spacing: normal;
  min-width: auto;
  min-height: auto;

  /* Maintain nav link appearance */
  display: flex;
  align-items: center;
  gap: var(--space-2, 0.5rem);
  padding: var(--space-3, 0.75rem) var(--space-4, 1rem);
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-medium, 500);
  color: var(--color-text-secondary, #52525b);
  cursor: pointer;
  transition: all var(--duration-fast, 150ms) var(--ease-smooth, ease-out);
}

/* Desktop compact override */
@media (min-width: 992px) {
  .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn,
  .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon,
  .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn,
  .c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link {
    padding: var(--space-2, 0.5rem) var(--space-3, 0.75rem);
    font-size: var(--text-xs, 0.75rem);
  }
}

/* Hover state for reset buttons */
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn:hover,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon:hover,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn:hover,
.c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link:hover {
  background-color: var(--color-primary-subtle, rgba(37, 99, 235, 0.1));
  color: var(--color-primary, #2563EB);
}

/* Dark mode reset for conflicting button classes */
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link {
  background-color: transparent;
  border-color: transparent;
  color: var(--ecs-dark-text-muted, #a1a1aa);
}

[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn:hover,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon:hover,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn:hover,
[data-theme-variant="modern"][data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link:hover,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn:hover,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.ecs-btn-icon:hover,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item .c-admin-nav__dropdown-toggle.btn:hover,
[data-style="dark"] .c-admin-nav .c-admin-nav__list .c-admin-nav__item button.c-admin-nav__link:hover {
  background-color: rgba(96, 165, 250, 0.15);
  color: var(--ecs-primary-light, #60A5FA);
}

/*
 * Prevent Bootstrap dropdown-menu styles from overriding nav dropdowns
 */
.c-admin-nav .c-admin-nav__dropdown.dropdown-menu {
  /* Override Bootstrap dropdown defaults */
  position: absolute;
  inset: unset;
  top: calc(100% + var(--space-1, 0.25rem));
  left: 0;
  transform: none;
  margin: 0;
  min-width: 14rem;
}

/* ============================================================================
   NOTES FOR DEVELOPERS
   ============================================================================

   HTML STRUCTURE:
   <nav class="c-admin-nav" data-controller="admin-nav">
     <ul class="c-admin-nav__list">
       <li class="c-admin-nav__item">
         <a href="#" class="c-admin-nav__link" data-action="navigate">
           <i class="c-admin-nav__icon ti ti-dashboard"></i>
           <span class="c-admin-nav__text">Dashboard</span>
         </a>
       </li>

       <li class="c-admin-nav__item" data-dropdown>
         <button class="c-admin-nav__link c-admin-nav__dropdown-toggle"
                 data-action="toggle-dropdown">
           <i class="c-admin-nav__icon ti ti-users"></i>
           <span class="c-admin-nav__text">Users</span>
         </button>
         <ul class="c-admin-nav__dropdown">
           <li>
             <a href="#" class="c-admin-nav__dropdown-item">
               <i class="ti ti-user"></i>
               <span>User Management</span>
             </a>
           </li>
         </ul>
       </li>
     </ul>
   </nav>

   JAVASCRIPT HOOKS:
   - data-controller="admin-nav" - Main controller
   - data-action="navigate" - Link navigation
   - data-action="toggle-dropdown" - Toggle dropdown
   - data-dropdown - Marks dropdown parent

   STATE CLASSES:
   - is-active - Active nav item
   - is-open - Open dropdown
   - is-loading - Loading state
   - is-collapsed - Collapsed mobile menu
   - is-disabled - Disabled item

   THEME SUPPORT:
   - Uses [data-theme-variant="modern"][data-style="dark"] for modern dark mode
   - Uses [data-theme-variant="modern"]:not([data-style="dark"]) for modern light mode
   - Falls back to [data-style="dark"] for generic dark mode support

   Z-INDEX STRATEGY:
   - Nav container: z-index: 100 (above page content, below navbar at 1030)
   - Nav items: z-index: 1 (base) / z-index: 1001 (when .is-open)
   - Dropdowns: z-index: 1000 (appears above all page content)
   - Open items elevated above siblings for proper horizontal scroll behavior
   - This ensures dropdowns visible above page content (cards, tables, etc.)
   - Modals remain above at z-index: 1050+

   SPECIFICITY MANAGEMENT:
   - NO !important declarations
   - Use full BEM paths for higher specificity
   - Proper cascade ordering
   - State classes combine with base classes
   - Protection rules for conflicting external classes (.ecs-btn, .btn)

   NO INLINE STYLES: All styling via classes
   NO DUPLICATE IDS: Use data-* for identification
   EVENT DELEGATION: All events handled by controller

   ============================================================================
 */
