/**
 * ============================================================================
 * PROGRESSIVE DISCLOSURE COMPONENT
 * ============================================================================
 *
 * Reusable component for showing/hiding additional content.
 * Implements best practices for mobile UX - show critical info first,
 * reveal details on demand.
 *
 * BEM Structure:
 * - c-disclosure: Container for expandable content
 * - c-disclosure__trigger: Clickable element to toggle content
 * - c-disclosure__content: Hidden content revealed on expand
 * - c-disclosure__icon: Optional chevron/indicator icon
 *
 * Variants:
 * - c-disclosure--card: Card-style with border and background
 * - c-disclosure--inline: Minimal inline style
 * - c-disclosure--table-row: For table row expansion
 *
 * States:
 * - is-expanded: Content is visible
 * - is-collapsed: Content is hidden (default)
 *
 * Usage:
 *   <div class="c-disclosure" data-disclosure>
 *     <button class="c-disclosure__trigger" data-disclosure-trigger>
 *       <span>View Details</span>
 *       <i class="c-disclosure__icon ti ti-chevron-down"></i>
 *     </button>
 *     <div class="c-disclosure__content" data-disclosure-content>
 *       Hidden content here...
 *     </div>
 *   </div>
 *
 * ============================================================================
 */

/* ============================================================================
   BASE DISCLOSURE CONTAINER
   ============================================================================ */

.c-disclosure {
  position: relative;
  width: 100%;
}

/* ============================================================================
   TRIGGER BUTTON
   ============================================================================ */

.c-disclosure__trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: var(--space-3) var(--space-4);
  background: transparent;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--color-text-primary);
  text-align: left;
  transition: background-color var(--duration-fast) var(--ease-smooth),
              color var(--duration-fast) var(--ease-smooth);
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.c-disclosure__trigger:hover {
  background: var(--color-bg-hover);
}

.c-disclosure__trigger:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: -2px;
  outline-offset: 2px;
}

/* Trigger text */

.c-disclosure__trigger-text {
  flex: 1;
  min-width: 0;
}

/* ============================================================================
   CHEVRON ICON
   ============================================================================ */

.c-disclosure__icon {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  margin-left: var(--space-2);
  transition: transform var(--duration-normal) var(--ease-smooth);
  color: var(--color-text-tertiary);
}

/* Rotate icon when expanded */

.c-disclosure.is-expanded .c-disclosure__icon {
  transform: rotate(180deg);
}

/* ============================================================================
   EXPANDABLE CONTENT
   ============================================================================ */

.c-disclosure__content {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows var(--duration-normal) var(--ease-smooth),
              opacity var(--duration-fast) var(--ease-smooth);
  opacity: 0;
  overflow: hidden;
}

.c-disclosure__content-inner {
  overflow: hidden;
}

/* Expanded state */

.c-disclosure.is-expanded .c-disclosure__content {
  grid-template-rows: 1fr;
  opacity: 1;
}

/* For browsers that don't support grid animation */

@supports not (grid-template-rows: 0fr) {
  .c-disclosure__content {
    max-height: 0;
    transition: max-height var(--duration-normal) var(--ease-smooth),
                opacity var(--duration-fast) var(--ease-smooth);
  }

  .c-disclosure.is-expanded .c-disclosure__content {
    max-height: 2000px;
    /* Large enough for most content */
  }
}

/* ============================================================================
   CARD VARIANT
   ============================================================================ */

.c-disclosure--card {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.c-disclosure--card .c-disclosure__trigger {
  padding: var(--space-4);
  background: var(--color-bg-elevated);
}

.c-disclosure--card .c-disclosure__trigger:hover {
  background: var(--color-bg-hover);
}

.c-disclosure--card .c-disclosure__content-inner {
  padding: var(--space-4);
  border-top: 1px solid var(--color-border-primary);
}

.c-disclosure--card.is-expanded .c-disclosure__content-inner {
  border-top-color: var(--color-border-primary);
}

/* ============================================================================
   INLINE VARIANT (minimal, no borders)
   ============================================================================ */

.c-disclosure--inline .c-disclosure__trigger {
  padding: var(--space-2) 0;
  color: var(--color-primary);
  font-weight: var(--font-normal);
}

.c-disclosure--inline .c-disclosure__trigger:hover {
  background: transparent;
  text-decoration: underline;
}

.c-disclosure--inline .c-disclosure__content-inner {
  padding-top: var(--space-2);
}

/* ============================================================================
   TABLE ROW VARIANT (for expanding table rows on mobile)
   ============================================================================ */

.c-disclosure--table-row {
  display: contents;
}

.c-disclosure--table-row .c-disclosure__trigger {
  display: table-row;
  cursor: pointer;
}

.c-disclosure--table-row .c-disclosure__content {
  display: none;
}

.c-disclosure--table-row.is-expanded .c-disclosure__content {
  display: table-row;
}

/* ============================================================================
   ACCORDION GROUP (mutually exclusive expansion)
   ============================================================================ */

.c-accordion {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.c-accordion > .c-disclosure {
  margin: 0;
}

/* Bordered accordion style */

.c-accordion--bordered {
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  overflow: hidden;
  gap: 0;
}

.c-accordion--bordered > .c-disclosure {
  border-radius: 0;
  border: none;
  border-bottom: 1px solid var(--color-border-primary);
}

.c-accordion--bordered > .c-disclosure:last-child {
  border-bottom: none;
}

/* ============================================================================
   DATA SUMMARY (show key info, expand for details)
   ============================================================================ */

.c-data-summary {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.c-data-summary__primary {
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  color: var(--color-text-primary);
}

.c-data-summary__secondary {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
}

.c-data-summary__meta {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.c-data-summary__meta-icon {
  font-size: var(--text-xs);
  color: var(--color-text-tertiary);
}

/* ============================================================================
   DETAIL PANEL (expanded content layout)
   ============================================================================ */

.c-detail-panel {
  display: grid;
  gap: var(--space-3);
}

.c-detail-panel__section {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.c-detail-panel__label {
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.c-detail-panel__value {
  font-size: var(--text-sm);
  color: var(--color-text-primary);
}

/* Two-column layout for detail panels */

@media (min-width: 480px) {
  .c-detail-panel--two-col {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ============================================================================
   MOBILE OPTIMIZATIONS
   ============================================================================ */

@media (max-width: 767.98px) {
  /* Larger touch targets on mobile */

  .c-disclosure__trigger {
    min-height: 48px;
    padding: var(--space-3) var(--space-4);
  }

  /* Full-width disclosure on mobile */

  .c-disclosure {
    border-radius: 0;
  }

  .c-disclosure--card {
    border-left: none;
    border-right: none;
    border-radius: 0;
  }

  /* Larger icon for better visibility */

  .c-disclosure__icon {
    width: 24px;
    height: 24px;
  }

  /* Stacked accordions with no gap on mobile */

  .c-accordion {
    gap: 0;
  }

  .c-accordion > .c-disclosure + .c-disclosure {
    border-top: 1px solid var(--color-border-primary);
  }
}

/* ============================================================================
   DARK MODE
   ============================================================================ */

[data-style="dark"] .c-disclosure--card {
  background: var(--color-bg-card);
  border-color: var(--color-border-primary);
}

[data-style="dark"] .c-disclosure--card .c-disclosure__trigger {
  background: var(--color-bg-elevated);
}

[data-style="dark"] .c-disclosure--card .c-disclosure__trigger:hover {
  background: var(--color-bg-hover);
}

[data-style="dark"] .c-disclosure--card .c-disclosure__content-inner {
  border-top-color: var(--color-border-primary);
}

/* ============================================================================
   ACCESSIBILITY
   ============================================================================ */

/* Respect reduced motion preference */

@media (prefers-reduced-motion: reduce) {
  .c-disclosure__content,
  .c-disclosure__icon {
    transition: none;
  }
}

/* Focus visible for keyboard navigation */

/* Screen reader text for expand/collapse state */

.c-disclosure__sr-status {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}