/**
 * Z-Index Hierarchy - Single Source of Truth
 * All z-index values must be defined here to prevent conflicts
 * 
 * This replaces scattered z-index declarations across multiple files
 * and ensures consistent layering throughout the application.
 */

:root {
  /* Base layers */
  --z-base: 1;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  
  /* Modal system */
  --z-backdrop: 1040;
  --z-modal: 1050;
  --z-modal-dropdown: 1060;
  
  /* Notifications */
  --z-popover: 1070;
  --z-tooltip: 1080;
  --z-toast: 1090;
  
  /* System alerts */
  --z-sweetalert: 2000;
}

/* ===== BASE LAYER ELEMENTS ===== */
.layout-wrapper,
.layout-container,
.layout-page {
  z-index: var(--z-base);
}

/* ===== DROPDOWN ELEMENTS ===== */
.dropdown-menu,
.select2-dropdown {
  z-index: var(--z-dropdown) !important;
}

/* ===== STICKY ELEMENTS ===== */
.sticky-top,
.position-sticky {
  z-index: var(--z-sticky);
}

/* ===== FIXED ELEMENTS ===== */
.layout-navbar,
.navbar-fixed,
.position-fixed {
  z-index: var(--z-fixed);
}

/* ===== MODAL SYSTEM ===== */
.modal-backdrop {
  z-index: var(--z-backdrop) !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  background-color: rgba(0, 0, 0, 0.5) !important;
}

.modal {
  z-index: var(--z-modal) !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  overflow-x: hidden !important;
  overflow-y: auto !important;
  outline: 0 !important;
}

/* Dropdowns inside modals need higher z-index */
.modal .dropdown-menu,
.modal .select2-dropdown,
.modal .select2-container {
  z-index: var(--z-modal-dropdown) !important;
}

/* ===== NOTIFICATION ELEMENTS ===== */
.popover {
  z-index: var(--z-popover) !important;
}

.tooltip {
  z-index: var(--z-tooltip) !important;
}

.toast-container,
.toast-wrapper {
  z-index: var(--z-toast) !important;
}

/* ===== SYSTEM ALERTS ===== */
.swal2-container {
  z-index: var(--z-sweetalert) !important;
}

/* ===== SPECIAL FIXES ===== */
/* Fix multiple backdrop issues */
.modal-backdrop + .modal-backdrop {
  display: none !important;
}

/* Fix modal container positioning */
#reportMatchModal-container,
#imageModals-container {
  position: relative;
  z-index: var(--z-modal);
}

/* CRITICAL FIX: ECS modal z-index hierarchy override */
.ecs-modal .modal-backdrop,
.modal.ecs-modal ~ .modal-backdrop {
  z-index: 1040 !important;
}

.modal.ecs-modal,
.ecs-modal {
  z-index: 1055 !important;
}

/* Ensure proper stacking context */
.modal-dialog {
  position: relative;
  z-index: 1;
}

.modal-content {
  position: relative;
  z-index: 1;
}