<!-- ECS FC Schedule Management Modals -->

{% block modals %}
{{ super() }}

<!-- Create/Edit Match Modal -->
<div class="modal c-modal fade" data-modal id="createMatchModal" tabindex="-1" aria-labelledby="createMatchModalLabel" aria-hidden="true">
    <div class="modal-dialog c-modal__dialog modal-lg c-modal__dialog--lg" data-modal-dialog>
        <div class="modal-content c-modal__content" data-modal-content data-modal-content>
            <div class="modal-header c-modal__header" data-modal-header data-modal-header>
                <h5 class="modal-title c-modal__title" id="createMatchModalLabel">Create Match</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-dismiss aria-label="Close"></button>
            </div>
            <form id="ecs-fc-match-form" novalidate>
                <div class="modal-body c-modal__body" data-modal-body data-modal-body>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="opponent_name" class="form-label">Opponent Team <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="opponent_name" name="opponent_name" required data-form-control>
                                <div class="invalid-feedback">Please enter the opponent team name.</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="match_date" class="form-label">Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="match_date" name="match_date" required data-form-control>
                                <div class="invalid-feedback">Please select a match date.</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="match_time" class="form-label">Time <span class="text-danger">*</span></label>
                                <input type="time" class="form-control" id="match_time" name="match_time" required data-form-control>
                                <div class="invalid-feedback">Please select a match time.</div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8">
                            <div class="mb-3">
                                <label for="ecsfc-modal-location" class="form-label">Location <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="ecsfc-modal-location" name="location" 
                                       placeholder="e.g., Magnuson Park, Seattle" required data-form-control>
                                <div class="invalid-feedback">Please enter the match location.</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="field_name" class="form-label">Field Name</label>
                                <input type="text" class="form-control" id="field_name" name="field_name" 
                                       placeholder="e.g., Field 1" data-form-control>
                                <small class="form-text text-muted">Optional specific field designation</small>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Home or Away</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="match_type" id="home_match" value="home" checked>
                                    <label class="form-check-label" for="home_match">
                                        <i class="fas fa-home me-1"></i>Home Match
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="match_type" id="away_match" value="away">
                                    <label class="form-check-label" for="away_match">
                                        <i class="fas fa-plane me-1"></i>Away Match
                                    </label>
                                </div>
                                <input type="hidden" name="is_home_match" id="is_home_match" value="true">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="rsvp_deadline" class="form-label">RSVP Deadline</label>
                                <input type="datetime-local" class="form-control" id="rsvp_deadline" name="rsvp_deadline" data-form-control>
                                <small class="form-text text-muted">Optional deadline for player responses</small>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="notes" class="form-label">Notes</label>
                        <textarea class="form-control" id="notes" name="notes" rows="3" 
                                  placeholder="Additional information about the match..." data-form-control></textarea>
                    </div>
                </div>
                <div class="modal-footer c-modal__footer" data-modal-footer data-modal-footer>
                    <button type="button" class="c-btn c-btn--secondary transform-none" data-bs-dismiss="modal" data-dismiss>Cancel</button>
                    <button type="submit" class="c-btn c-btn--primary transform-none">
                        <i class="fas fa-save me-1"></i>Save Match
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Import Matches Modal -->
<div class="modal c-modal fade" data-modal id="importMatchesModal" tabindex="-1" aria-labelledby="importMatchesModalLabel" aria-hidden="true">
    <div class="modal-dialog c-modal__dialog modal-lg c-modal__dialog--lg" data-modal-dialog>
        <div class="modal-content c-modal__content" data-modal-content data-modal-content>
            <div class="modal-header c-modal__header" data-modal-header data-modal-header>
                <h5 class="modal-title c-modal__title" id="importMatchesModalLabel">Import Matches from CSV</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-dismiss aria-label="Close"></button>
            </div>
            <form id="ecs-fc-import-form" novalidate>
                <div class="modal-body c-modal__body" data-modal-body data-modal-body>
                    <div class="alert alert-info" data-alert>
                        <h6><i class="fas fa-info-circle me-2"></i>CSV Format Instructions</h6>
                        <p class="mb-2">Please format your CSV data with the following columns:</p>
                        <code>Opponent,Date,Time,Location,Home/Away,Field,Notes</code>
                        <hr>
                        <p class="mb-1"><strong>Example:</strong></p>
                        <small class="font-monospace">
                            Seattle Sounders,2024-03-15,19:00,Magnuson Park,Home,Field 1,Important match<br>
                            Portland Timbers,2024-03-22,14:00,Providence Park,Away,,Rivalry game
                        </small>
                        <hr>
                        <ul class="mb-0 small">
                            <li><strong>Date format:</strong> YYYY-MM-DD</li>
                            <li><strong>Time format:</strong> HH:MM (24-hour)</li>
                            <li><strong>Home/Away:</strong> "Home" or "Away"</li>
                            <li><strong>Field and Notes:</strong> Optional columns</li>
                        </ul>
                    </div>

                    <div class="mb-3">
                        <label for="csv-matches" class="form-label">CSV Data <span class="text-danger">*</span></label>
                        <textarea class="form-control font-monospace" id="csv-matches" name="csv_matches" rows="10" 
                                  placeholder="Paste your CSV data here..." required data-form-control></textarea>
                        <div class="invalid-feedback">Please enter CSV data.</div>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="preview-before-import" checked>
                        <label class="form-check-label" for="preview-before-import">
                            Preview matches before importing
                        </label>
                    </div>

                    <div id="import-preview" class="d-none">
                        <h6>Preview:</h6>
                        <div class="c-table-wrapper" data-table-responsive>
                            <table class="c-table c-table--compact c-table--striped" data-table data-mobile-table data-table-type="schedule">
                                <thead scope="col">
                                    <tr>
                                        <th scope="col">Opponent</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Time</th>
                                        <th scope="col">Location</th>
                                        <th scope="col">Type</th>
                                    </tr>
                                </thead>
                                <tbody id="preview-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer c-modal__footer" data-modal-footer data-modal-footer>
                    <button type="button" class="c-btn c-btn--outline-secondary transform-none" id="preview-btn" data-action="preview-csv">
                        <i class="fas fa-eye me-1"></i>Preview
                    </button>
                    <button type="button" class="c-btn c-btn--secondary transform-none" data-bs-dismiss="modal" data-dismiss>Cancel</button>
                    <button type="submit" class="c-btn c-btn--primary transform-none">
                        <i class="fas fa-upload me-1"></i>Import Matches
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Match Details Modal -->
<div class="modal c-modal fade" data-modal id="matchDetailsModal" tabindex="-1" aria-labelledby="matchDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog c-modal__dialog modal-lg c-modal__dialog--lg" data-modal-dialog>
        <div class="modal-content c-modal__content" data-modal-content data-modal-content>
            <div class="modal-header c-modal__header" data-modal-header data-modal-header>
                <h5 class="modal-title c-modal__title" id="matchDetailsModalLabel">Match Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-dismiss aria-label="Close"></button>
            </div>
            <div class="modal-body c-modal__body" data-modal-body id="match-details-content" data-modal-body aria-labelledby="rsvpModalLabel">
                <!-- Content will be populated by JavaScript -->
                <div class="text-center">
                    <div class="spinner-border" role="status" data-spinner>
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer c-modal__footer" data-modal-footer data-modal-footer>
                <button type="button" class="c-btn c-btn--secondary transform-none" data-bs-dismiss="modal" data-dismiss>Close</button>
            </div>
        </div>
    </div>
</div>

<!-- RSVP Response Modal -->
<div class="modal c-modal fade" data-modal id="rsvpModal" tabindex="-1" aria-labelledby="rsvpModalLabel" aria-hidden="true">
    <div class="modal-dialog c-modal__dialog" data-modal-dialog>
        <div class="modal-content c-modal__content" data-modal-content data-modal-content>
            <div class="modal-header c-modal__header" data-modal-header data-modal-header>
                <h5 class="modal-title c-modal__title" id="rsvpModalLabel">RSVP Response</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-dismiss aria-label="Close"></button>
            </div>
            <form id="rsvp-form">
                <div class="modal-body c-modal__body" data-modal-body data-modal-body>
                    <div class="mb-3">
                        <label class="form-label">Your Response</label>
                        <div class="btn-group w-100" role="group" aria-label="RSVP Response">
                            <input type="radio" class="btn-check" name="rsvp_response" id="rsvp_yes" value="yes">
                            <label class="c-btn c-btn--outline-success" for="rsvp_yes">
                                <i class="fas fa-check me-1"></i>Yes, I'll be there
                            </label>

                            <input type="radio" class="btn-check" name="rsvp_response" id="rsvp_no" value="no">
                            <label class="c-btn c-btn--outline-danger" for="rsvp_no">
                                <i class="fas fa-times me-1"></i>No, I can't make it
                            </label>

                            <input type="radio" class="btn-check" name="rsvp_response" id="rsvp_maybe" value="maybe">
                            <label class="c-btn c-btn--outline-warning" for="rsvp_maybe">
                                <i class="fas fa-question me-1"></i>Maybe
                            </label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="rsvp_notes" class="form-label">Notes (Optional)</label>
                        <textarea class="form-control" id="rsvp_notes" name="rsvp_notes" rows="2" 
                                  placeholder="Any additional comments..." data-form-control></textarea>
                    </div>
                </div>
                <div class="modal-footer c-modal__footer" data-modal-footer data-modal-footer>
                    <button type="button" class="c-btn c-btn--secondary transform-none" data-bs-dismiss="modal" data-dismiss>Cancel</button>
                    <button type="submit" class="c-btn c-btn--primary transform-none">
                        <i class="fas fa-paper-plane me-1"></i>Submit Response
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{#
  ============================================================================
  INLINE SCRIPT REMOVED - STANDARDIZATION COMPLIANCE
  ============================================================================

  This inline script block has been removed per modal standardization guidelines.
  All functionality should be moved to:
  /app/static/custom_js/ecs-fc-schedule.js (or similar external JS file)

  Functions that need to be externalized:
  - Home/Away radio button handler (use event delegation)
  - CSV preview functionality (use data-action="preview-csv")
  - Match details modal loader (use data-action attributes)
  - Match details renderer
  - Status badge class helper

  Use data attributes for event binding:
  - data-action="preview-csv" (already added to preview button)
  - data-match-id for match-specific actions
  - data-response for RSVP actions

  Modal lifecycle should use Bootstrap 5 events:
  - show.bs.modal
  - shown.bs.modal
  - hide.bs.modal
  - hidden.bs.modal

  ============================================================================
#}

{% endblock %}