{% extends "base.html" %}

{% block title %}Waitlist Registration Confirmed - ECS FC Pub League{% endblock %}

{% block main_content %}
<div class="container-xxl flex-grow-1 container-p-y">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-0">Waitlist Registration Confirmed</h5>
                        <small class="text-muted">You're all set!</small>
                    </div>
                    <div class="d-none d-md-block">
                        <img src="{{ url_for('static', filename='img/ecs_pl_logo.png') }}" alt="ECS FC Pub League Logo" style="height: 35px;">
                    </div>
                </div>
                <div class="card-body">
                    <!-- Success Message -->
                    <div class="alert alert-success mb-4">
                        <div class="d-flex align-items-center">
                            <i class="ti ti-check-circle me-3" style="font-size: 2rem;"></i>
                            <div>
                                <h6 class="mb-1">Registration Complete!</h6>
                                <p class="mb-0">You have been successfully added to the ECS FC Pub League waitlist.</p>
                            </div>
                        </div>
                    </div>

                    <!-- What Happens Next -->
                    <div class="mb-4">
                        <h6 class="border-bottom pb-2 mb-3">What Happens Next?</h6>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="d-flex align-items-center">
                                    <div class="badge badge-center rounded-pill bg-primary me-3" style="width: 40px; height: 40px;">
                                        <i class="ti ti-bell"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">We'll Notify You</h6>
                                        <p class="mb-0 small text-muted">When spots become available, we'll reach out immediately</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="d-flex align-items-center">
                                    <div class="badge badge-center rounded-pill bg-primary me-3" style="width: 40px; height: 40px;">
                                        <i class="ti ti-clock"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Priority Access</h6>
                                        <p class="mb-0 small text-muted">You'll get first dibs on any openings that come up</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="d-flex align-items-center">
                                    <div class="badge badge-center rounded-pill bg-primary me-3" style="width: 40px; height: 40px;">
                                        <i class="ti ti-user-plus"></i>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Sub Opportunities</h6>
                                        <p class="mb-0 small text-muted">You may be contacted for substitute opportunities</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Discord Information -->
                    <div class="alert alert-primary mb-4" id="discord-info-card">
                        <div class="d-flex align-items-center">
                            <i class="ti ti-brand-discord me-3" style="font-size: 2rem;"></i>
                            <div class="flex-grow-1">
                                <h6 class="mb-1" id="discord-status-title">ðŸŽ¯ Important: Join Our Discord Server</h6>
                                <p class="mb-2" id="discord-status-message">If you haven't already, please join our Discord server! This is where we:</p>
                                <ul class="mb-2 ps-3" id="discord-benefits">
                                    <li>Send waitlist notifications when spots open up</li>
                                    <li>Post match announcements and schedule updates</li>
                                    <li>Coordinate substitution requests</li>
                                    <li>Share important league information</li>
                                    <li>Connect with other players in the community</li>
                                </ul>
                                <p class="mb-0" id="discord-status-footer"><strong>Don't miss out on opportunities!</strong></p>
                            </div>
                        </div>
                        <div class="mt-3">
                            <a href="https://discord.gg/weareecs" target="_blank" rel="noopener noreferrer" class="btn btn-primary" id="discord-join-btn">
                                <i class="ti ti-brand-discord me-2"></i>
                                Join Discord Server
                            </a>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="mb-4">
                        <h6 class="border-bottom pb-2 mb-3">Need Help?</h6>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="d-flex align-items-center">
                                    <i class="ti ti-brand-discord me-2 text-primary"></i>
                                    <span>Reach out on Discord for questions</span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="d-flex align-items-center">
                                    <i class="ti ti-mail me-2 text-primary"></i>
                                    <span>Check your email for updates</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex justify-content-center gap-3">
                        <a href="{{ url_for('main.index') }}" class="btn btn-primary">
                            <i class="ti ti-home me-2"></i>
                            Go to Dashboard
                        </a>
                        <a href="{{ url_for('players.player_profile', player_id=safe_current_user.player.id) }}" class="btn btn-outline-secondary">
                            <i class="ti ti-user me-2"></i>
                            View Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Discord Membership Check Script -->
<script src="{{ url_for('static', filename='custom_js/discord-membership-check.js') }}"></script>
<script>
// Pass Discord membership data to the global scope for the checker
{% if discord_membership_status %}
    window.discordMembershipStatus = {{ discord_membership_status|tojson }};
{% endif %}

{% if discord_error %}
    window.discordError = {{ discord_error|tojson }};
{% endif %}

// Initialize Discord membership checker for waitlist confirmation page
document.addEventListener('DOMContentLoaded', function() {
    window.discordChecker = new DiscordMembershipChecker({
        showUrgentPopup: true,
        showSuccessMessage: false // Don't show success popup on this page
    });
});
</script>

{% endblock %}