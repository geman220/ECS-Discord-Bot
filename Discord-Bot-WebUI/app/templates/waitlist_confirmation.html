{% extends "base.html" %}

{% block title %}Waitlist Registration Confirmed - ECS FC Pub League{% endblock %}

{% block page_css %}

{% if not config.get('ASSETS_PRODUCTION_MODE') %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/waitlist-confirmation.css') }}" />
{% endif %}
{% endblock %}

{% block main_content %}
<div class="container-xxl flex-grow-1 container-p-y">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">
            <div class="c-confirmation" data-component="waitlist-confirmation">
                <div class="c-confirmation__card">
                    <!-- Header -->
                    <div class="c-confirmation__header">
                        <div class="c-confirmation__header-content">
                            <h1 class="c-confirmation__title">Waitlist Registration Confirmed</h1>
                            <p class="c-confirmation__subtitle">You're all set!</p>
                        </div>
                        <div class="d-none d-md-block">
                            <img src="{{ url_for('static', filename='img/ecs_pl_logo.png') }}"
                                 alt="ECS FC Pub League Logo"
                                 class="c-confirmation__logo">
                        </div>
                    </div>

                    <!-- Body -->
                    <div class="c-confirmation__body">
                        <!-- Success Message -->
                        <div class="c-success-message">
                            <div class="c-success-message__content">
                                <div class="c-success-message__icon">
                                    <i class="ti ti-check-circle"></i>
                                </div>
                                <div class="c-success-message__text">
                                    <h2 class="c-success-message__heading">Registration Complete!</h2>
                                    <p class="c-success-message__description">You have been successfully added to the ECS FC Pub League waitlist.</p>
                                </div>
                            </div>
                        </div>

                        <!-- What Happens Next -->
                        <div class="c-next-steps">
                            <div class="c-next-steps__header">
                                <h3 class="c-next-steps__title">What Happens Next?</h3>
                            </div>
                            <div class="c-next-steps__grid">
                                <div class="c-next-steps__item">
                                    <div class="c-next-steps__item-icon">
                                        <i class="ti ti-bell"></i>
                                    </div>
                                    <div class="c-next-steps__item-content">
                                        <h4 class="c-next-steps__item-title">We'll Notify You</h4>
                                        <p class="c-next-steps__item-description">When spots become available, we'll reach out immediately</p>
                                    </div>
                                </div>
                                <div class="c-next-steps__item">
                                    <div class="c-next-steps__item-icon">
                                        <i class="ti ti-clock"></i>
                                    </div>
                                    <div class="c-next-steps__item-content">
                                        <h4 class="c-next-steps__item-title">Priority Access</h4>
                                        <p class="c-next-steps__item-description">You'll get first dibs on any openings that come up</p>
                                    </div>
                                </div>
                                <div class="c-next-steps__item">
                                    <div class="c-next-steps__item-icon">
                                        <i class="ti ti-user-plus"></i>
                                    </div>
                                    <div class="c-next-steps__item-content">
                                        <h4 class="c-next-steps__item-title">Sub Opportunities</h4>
                                        <p class="c-next-steps__item-description">You may be contacted for substitute opportunities</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Discord CTA -->
                        <div class="c-discord-cta" id="discord-info-card" data-component="discord-cta">
                            <div class="c-discord-cta__content">
                                <div class="c-discord-cta__icon">
                                    <i class="ti ti-brand-discord"></i>
                                </div>
                                <div class="c-discord-cta__text">
                                    <h3 class="c-discord-cta__title" id="discord-status-title">
                                        ðŸŽ¯ Important: Join Our Discord Server
                                    </h3>
                                    <p class="c-discord-cta__description" id="discord-status-message">
                                        If you haven't already, please join our Discord server! This is where we:
                                    </p>
                                    <ul class="c-discord-cta__benefits" id="discord-benefits">
                                        <li>Send waitlist notifications when spots open up</li>
                                        <li>Post match announcements and schedule updates</li>
                                        <li>Coordinate substitution requests</li>
                                        <li>Share important league information</li>
                                        <li>Connect with other players in the community</li>
                                    </ul>
                                    <p class="c-discord-cta__footer" id="discord-status-footer">
                                        <strong>Don't miss out on opportunities!</strong>
                                    </p>
                                </div>
                            </div>
                            <div class="c-discord-cta__actions">
                                <a href="https://discord.gg/weareecs"
                                   target="_blank"
                                   rel="noopener noreferrer"
                                   class="c-discord-cta__btn"
                                   id="discord-join-btn"
                                   data-action="join-discord">
                                    <i class="ti ti-brand-discord"></i>
                                    <span>Join Discord Server</span>
                                </a>
                            </div>
                        </div>

                        <!-- Help Section -->
                        <div class="c-confirmation__help">
                            <div class="c-confirmation__help-header">
                                <h3 class="c-confirmation__help-title">Need Help?</h3>
                            </div>
                            <div class="c-confirmation__help-grid">
                                <div class="c-confirmation__help-item">
                                    <i class="ti ti-brand-discord c-confirmation__help-icon"></i>
                                    <p class="c-confirmation__help-text">Reach out on Discord for questions</p>
                                </div>
                                <div class="c-confirmation__help-item">
                                    <i class="ti ti-mail c-confirmation__help-icon"></i>
                                    <p class="c-confirmation__help-text">Check your email for updates</p>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="c-confirmation__actions">
                            <a href="{{ url_for('main.index') }}"
                               class="c-confirmation__btn c-confirmation__btn--primary"
                               data-action="go-to-dashboard">
                                <i class="ti ti-home"></i>
                                <span>Go to Dashboard</span>
                            </a>
                            <a href="{{ url_for('players.player_profile', player_id=safe_current_user.player.id) }}"
                               class="c-confirmation__btn c-confirmation__btn--secondary"
                               data-action="view-profile">
                                <i class="ti ti-user"></i>
                                <span>View Profile</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Discord Membership Check Script -->
<script src="{{ url_for('static', filename='custom_js/discord-membership-check.js') }}"></script>
<script>
// Pass Discord membership data to the global scope for the checker
{% if discord_membership_status %}
    window.discordMembershipStatus = {{ discord_membership_status|tojson }};
{% endif %}

{% if discord_error %}
    window.discordError = {{ discord_error|tojson }};
{% endif %}

// Initialize Discord membership checker for waitlist confirmation page
document.addEventListener('DOMContentLoaded', function() {
    window.discordChecker = new DiscordMembershipChecker({
        showUrgentPopup: true,
        showSuccessMessage: false // Don't show success popup on this page
    });
});
</script>

{% endblock %}