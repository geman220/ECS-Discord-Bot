<!-- Team Schedule Display Snippet -->
<!-- This shows how special weeks, playoffs, and practice sessions are displayed -->

{% macro render_team_schedule(team, matches) %}
<div class="c-team-schedule" data-component="team-schedule">
    {% for match in matches %}
        {% set display_info = match|match_display_info %}

        {% if display_info.type == 'playoff' %}
            <!-- Playoff Week Display -->
            <div class="c-match-c-card c-match-card--playoff {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="playoff">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('playoff') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('playoff') }}"></i>
                    <strong class="c-match-card__title">{{ display_info.title }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('playoff') }}" data-badge>Playoffs</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__alert alert alert-info" data-alert>
                        <i class="ti-info-circle c-match-card__alert-icon"></i>
                        Playoff bracket will be determined after regular season ends.
                        <br><small>Your team has qualified for playoffs!</small>
                    </div>
                </div>
            </div>

        {% elif display_info.type == 'fun' %}
            <!-- Fun Week Display -->
            <div class="c-match-c-card c-match-card--fun {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="fun">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('fun') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('fun') }}"></i>
                    <strong class="c-match-card__title">{{ display_info.title }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('fun') }}" data-badge>Special</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__subtitle">{{ display_info.subtitle }}</div>
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__location">{{ match.location }}</div>
                    <div class="c-match-card__alert alert alert-warning" data-alert>
                        <i class="ti-star c-match-card__alert-icon"></i>
                        Fun activities and special events - no regular match scoring
                    </div>
                </div>
            </div>

        {% elif display_info.type == 'tst' %}
            <!-- TST Week Display -->
            <div class="c-match-c-card c-match-card--tst {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="tst">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('tst') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('tst') }}"></i>
                    <strong class="c-match-card__title">{{ display_info.title }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('tst') }}" data-badge>Training</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__subtitle">{{ display_info.subtitle }}</div>
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__location">{{ match.location }}</div>
                    <div class="c-match-card__alert alert alert-info" data-alert>
                        <i class="ti-target c-match-card__alert-icon"></i>
                        Team skills training and development session
                    </div>
                </div>
            </div>

        {% elif display_info.type == 'bye' %}
            <!-- BYE Week Display -->
            <div class="c-match-c-card c-match-card--bye {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="bye">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('bye') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('bye') }}"></i>
                    <strong class="c-match-card__title">{{ display_info.title }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('bye') }}" data-badge>BYE</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__subtitle">{{ display_info.subtitle }}</div>
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__alert alert alert-secondary" data-alert>
                        <i class="ti-calendar-off c-match-card__alert-icon"></i>
                        No games scheduled this week - enjoy your break!
                    </div>
                </div>
            </div>

        {% elif display_info.type == 'bonus' %}
            <!-- Bonus Week Display -->
            <div class="c-match-c-card c-match-card--bonus {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="bonus">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('bonus') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('bonus') }}"></i>
                    <strong class="c-match-card__title">{{ display_info.title }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('bonus') }}" data-badge>Bonus</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__subtitle">{{ display_info.subtitle }}</div>
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__location">{{ match.location }}</div>
                    <div class="c-match-card__alert alert alert-primary" data-alert>
                        <i class="ti-gift c-match-card__alert-icon"></i>
                        Additional activities and events
                    </div>
                </div>
            </div>

        {% elif display_info.type == 'practice' %}
            <!-- Practice Match Display -->
            <div class="c-match-c-card c-match-card--practice {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="practice">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('practice') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('practice') }}"></i>
                    <strong class="c-match-card__title">vs {{ match|opponent_name(team) }}</strong>
                    <span class="c-match-card__badge badge bg-{{ get_special_week_color('practice') }}" data-badge>Practice</span>
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__location">{{ match.location }}</div>
                    <div class="c-match-card__alert alert alert-success" data-alert>
                        <i class="ti-run c-match-card__alert-icon"></i>
                        <strong>Game 1 is a practice session</strong> - Game 2 is regular match
                    </div>
                </div>
            </div>

        {% else %}
            <!-- Regular Match Display -->
            <div class="c-match-c-card c-match-card--regular {{ display_info.css_class }}"
                 data-component="match-card"
                 data-match-type="regular">
                <div class="c-match-card__header">
                    <i class="{{ get_special_week_icon('regular') }} c-match-card__icon c-match-card__icon--{{ get_special_week_color('regular') }}"></i>
                    <strong class="c-match-card__title">vs {{ match|opponent_name(team) }}</strong>
                    {% if match.reported %}
                        <span class="c-match-card__badge c-match-card__badge--result badge bg-success" data-badge>{{ match|match_result_display(team) }}</span>
                    {% else %}
                        <span class="c-match-card__badge badge bg-secondary" data-badge>Scheduled</span>
                    {% endif %}
                </div>
                <div class="c-match-card__content">
                    <div class="c-match-card__date">{{ match.date.strftime('%B %d, %Y') }}</div>
                    <div class="c-match-card__time">{{ match.time.strftime('%I:%M %p') }}</div>
                    <div class="c-match-card__location">{{ match.location }}</div>
                    {% if match.reported %}
                        <div class="c-match-card__score">
                            Final Score: {{ match.home_team_score }} - {{ match.away_team_score }}
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>
{% endmacro %}

<!-- Dashboard Week Summary -->
{% macro render_week_summary(week_number, matches) %}
{% set week_info = matches|week_summary(week_number) %}
<div class="c-week-summary c-week-summary--{{ week_info.type }} {{ week_info.css_class }}"
     data-component="week-summary"
     data-week="{{ week_number }}">
    <div class="c-week-summary__header">
        <h5 class="c-week-summary__title">{{ week_info.title }}</h5>
        {% if week_info.subtitle %}
            <small class="c-week-summary__subtitle text-muted">{{ week_info.subtitle }}</small>
        {% endif %}
    </div>

    {% if week_info.type == 'playoff' %}
        <div class="c-week-summary__playoff">
            <div class="c-week-summary__alert alert alert-info" data-alert>
                <i class="ti-trophy c-week-summary__alert-icon"></i>
                <strong>Playoff Week</strong><br>
                {{ format_playoff_placeholder(1, matches|length) }}
            </div>
        </div>
    {% elif week_info.type in ['fun', 'tst', 'bye', 'bonus'] %}
        <div class="c-week-summary__special">
            <div class="c-week-summary__alert alert alert-{{ get_special_week_color(week_info.type) }}" data-alert>
                <i class="{{ get_special_week_icon(week_info.type) }} c-week-summary__alert-icon"></i>
                <strong>{{ week_info.title }}</strong><br>
                {{ week_info.subtitle }}
            </div>
        </div>
    {% else %}
        <div class="c-week-summary__matches">
            <div class="row">
                {% for match in matches %}
                    <div class="col-md-6 mb-2">
                        <div class="c-week-summary__match-c-card">
                            <strong class="c-week-summary__match-teams">{{ match.home_team.name }} vs {{ match.away_team.name }}</strong>
                            <br>
                            <small class="c-week-summary__match-info">{{ match.time.strftime('%I:%M %p') }} at {{ match.location }}</small>
                            {% if match|is_practice_match %}
                                <br><small class="c-week-summary__match-note text-success">Game 1: Practice</small>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>
{% endmacro %}

<!-- Playoff Management Section (for admins) -->
{% macro render_playoff_management(matches) %}
{% if should_show_playoff_setup(matches) %}
<div class="c-playoff-mgmt" data-component="playoff-management">
    <div class="c-playoff-mgmt__card c-card">
        <div class="c-playoff-mgmt__header c-card__header">
            <h5 class="c-playoff-mgmt__title">
                <i class="ti-trophy c-playoff-mgmt__icon"></i>Playoff Management
            </h5>
        </div>
        <div class="c-playoff-mgmt__body c-card__body">
            <div class="c-playoff-mgmt__alert alert alert-warning" data-alert>
                <i class="ti-info-circle c-playoff-mgmt__alert-icon"></i>
                <strong>Playoff brackets need to be set up!</strong><br>
                Regular season is complete. You can now assign teams to playoff matchups.
            </div>

            <div class="c-playoff-mgmt__actions">
                <button class="c-playoff-mgmt__button c-playoff-mgmt__button--primary c-btn c-btn--primary"
                        data-action="setup-playoff-brackets">
                    <i class="ti-tournament c-playoff-mgmt__button-icon"></i>Set Up Playoff Brackets
                </button>
                <button class="c-playoff-mgmt__button c-playoff-mgmt__button--secondary c-btn c-btn--secondary"
                        data-action="view-standings">
                    <i class="ti-list c-playoff-mgmt__button-icon"></i>View Final Standings
                </button>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}
