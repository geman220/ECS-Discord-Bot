{% extends "admin_panel/base.html" %}
{% import 'macros.html' as macros %}

{% block title %}Match & League Operations - Admin Panel{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active">Match & League Operations</li>
{% endblock %}

{% block panel_content %}
<div class="c-match-ops" data-component="match-operations">
    <!-- Operations Overview -->
    <div class="c-match-stats" data-component="stats-grid">
        <div class="c-match-stats__grid">
            <div class="c-stat-card c-stat-card--primary" data-stat-card data-stat-type="matches">
                <div class="c-stat-card__content">
                    <div class="c-stat-card__value">{{ stats.total_matches or 0 }}</div>
                    <div class="c-stat-card__label">Total Matches</div>
                </div>
                <div class="c-stat-card__icon">
                    <i class="ti ti-trophy"></i>
                </div>
            </div>
            <div class="c-stat-card c-stat-card--success" data-stat-card data-stat-type="leagues">
                <div class="c-stat-card__content">
                    <div class="c-stat-card__value">{{ stats.active_leagues or 0 }}</div>
                    <div class="c-stat-card__label">Active Leagues</div>
                </div>
                <div class="c-stat-card__icon">
                    <i class="ti ti-flag"></i>
                </div>
            </div>
            <div class="c-stat-card c-stat-card--warning" data-stat-card data-stat-type="upcoming">
                <div class="c-stat-card__content">
                    <div class="c-stat-card__value">{{ stats.upcoming_matches or 0 }}</div>
                    <div class="c-stat-card__label">Upcoming Matches</div>
                </div>
                <div class="c-stat-card__icon">
                    <i class="ti ti-calendar"></i>
                </div>
            </div>
            <div class="c-stat-card c-stat-card--info" data-stat-card data-stat-type="teams">
                <div class="c-stat-card__content">
                    <div class="c-stat-card__value">{{ stats.teams_count or 0 }}</div>
                    <div class="c-stat-card__label">Active Teams</div>
                </div>
                <div class="c-stat-card__icon">
                    <i class="ti ti-users"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Match Management -->
    <div class="c-match-sections" data-component="sections-grid">
        <div class="c-match-sections__grid">
            <!-- Match Scheduling -->
            <div class="c-card" data-card data-section="scheduling">
                <div class="c-card__header">
                    <div class="c-card__title">
                        <i class="ti ti-calendar-plus c-card__title-icon c-card__title-icon--primary"></i>
                        <span>Match Scheduling</span>
                    </div>
                </div>
                <div class="c-card__body">
                    <p class="c-card__description">Schedule and manage matches for all leagues</p>
                    <nav class="c-link-list" aria-label="Match scheduling">
                        <a href="{{ url_for('admin_panel.schedule_matches') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="schedule-new-match">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-plus"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Schedule New Match</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.view_matches') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="view-all-matches">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-list"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">View All Matches</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--primary" data-badge data-count="{{ stats.total_matches or 0 }}">{{ stats.total_matches or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.upcoming_matches') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="upcoming-matches">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-calendar-event"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Upcoming Matches</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--warning" data-badge data-count="{{ stats.upcoming_matches or 0 }}">{{ stats.upcoming_matches or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Match Management -->
            <div class="c-card" data-card data-section="management">
                <div class="c-card__header">
                    <div class="c-card__title">
                        <i class="ti ti-shield-check c-card__title-icon c-card__title-icon--success"></i>
                        <span>Match Management</span>
                    </div>
                </div>
                <div class="c-card__body">
                    <p class="c-card__description">Verify matches and manage substitute requests</p>
                    <nav class="c-link-list" aria-label="Match management">
                        <a href="{{ url_for('admin_panel.match_verification') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="match-verification">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-shield-check"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Match Verification</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--warning" data-badge data-count="{{ stats.pending_verification or 0 }}">{{ stats.pending_verification or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.substitute_management') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="substitute-management">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-users"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Substitute Management</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--info" data-badge data-count="{{ stats.sub_requests or 0 }}">{{ stats.sub_requests or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.live_matches') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="live-matches">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-broadcast"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Live Matches</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--success" data-badge data-count="{{ stats.live_matches or 0 }}">{{ stats.live_matches or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- League Management & Teams -->
    <div class="c-match-sections" data-component="sections-grid">
        <div class="c-match-sections__grid">
            <!-- League Management -->
            <div class="c-card" data-card data-section="leagues">
                <div class="c-card__header">
                    <div class="c-card__title">
                        <i class="ti ti-flag c-card__title-icon c-card__title-icon--warning"></i>
                        <span>League Management</span>
                    </div>
                </div>
                <div class="c-card__body">
                    <p class="c-card__description">Manage leagues, divisions, and standings</p>
                    <nav class="c-link-list" aria-label="League management">
                        <a href="{{ url_for('admin_panel.manage_leagues') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="league-settings">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-settings"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">League Settings</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.league_standings') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="standings-tables">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-list-numbers"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Standings & Tables</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.seasons') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="season-management">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-calendar-time"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Season Management</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--info" data-badge data-count="{{ stats.active_seasons or 1 }}">{{ stats.active_seasons or 1 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Team Management -->
            <div class="c-card" data-card data-section="teams">
                <div class="c-card__header">
                    <div class="c-card__title">
                        <i class="ti ti-users c-card__title-icon c-card__title-icon--info"></i>
                        <span>Team Management</span>
                    </div>
                </div>
                <div class="c-card__body">
                    <p class="c-card__description">Manage teams, rosters, and player assignments</p>
                    <nav class="c-link-list" aria-label="Team management">
                        <a href="{{ url_for('admin_panel.manage_teams') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="team-settings">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-shield"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Team Settings</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--primary" data-badge data-count="{{ stats.teams_count or 0 }}">{{ stats.teams_count or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.team_rosters') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="team-rosters">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-list"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Team Rosters</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                        <a href="{{ url_for('admin_panel.player_transfers') }}"
                           class="c-link-list__item"
                           data-action="navigate-link"
                           data-target="player-transfers">
                            <div class="c-link-list__content">
                                <div class="c-link-list__icon">
                                    <i class="ti ti-arrows-exchange"></i>
                                </div>
                                <div class="c-link-list__text">
                                    <div class="c-link-list__title">Player Transfers</div>
                                </div>
                            </div>
                            <div class="c-link-list__meta">
                                <span class="c-badge c-badge--warning" data-badge data-count="{{ stats.pending_transfers or 0 }}">{{ stats.pending_transfers or 0 }}</span>
                                <i class="ti ti-chevron-right c-link-list__arrow"></i>
                            </div>
                        </a>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="c-match-info" data-component="info-alert">
        <div class="c-alert c-alert--info">
            <div class="c-alert__icon">
                <i class="ti ti-info-circle"></i>
            </div>
            <div class="c-alert__content">
                <strong>Match & League Operations:</strong>
                This section provides comprehensive tools for managing all aspects of league operations,
                from scheduling matches to managing team rosters and tracking results.
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block custom_css %}
{{ super() }}
{% if not config.get('ASSETS_PRODUCTION_MODE') and (vite_production_mode is not defined or not vite_production_mode()) %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/admin-panel/match-operations.css') }}">
{% endif %}
{% endblock %}
