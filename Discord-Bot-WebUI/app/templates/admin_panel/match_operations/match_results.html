{% extends "admin_panel/base.html" %}

{% block title %}Match Results - Admin Panel{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item">
    <a href="{{ url_for('admin_panel.match_operations') }}">Match Operations</a>
</li>
<li class="breadcrumb-item active">Match Results</li>
{% endblock %}

{% block panel_content %}

<!-- Statistics Cards -->
<div class="c-stats-grid" data-component="stats-grid">
    <div class="c-stat-card c-stat-card--primary">
        <div class="c-stat-card__content">
            <div class="c-stat-card__body">
                <h5 class="c-stat-card__value">{{ stats.completed_matches }}</h5>
                <p class="c-stat-card__label">Completed Matches</p>
            </div>
            <i class="ti ti-check c-stat-card__icon"></i>
        </div>
    </div>
    <div class="c-stat-card c-stat-card--warning">
        <div class="c-stat-card__content">
            <div class="c-stat-card__body">
                <h5 class="c-stat-card__value">{{ stats.pending_results }}</h5>
                <p class="c-stat-card__label">Pending Results</p>
            </div>
            <i class="ti ti-clock c-stat-card__icon"></i>
        </div>
    </div>
    <div class="c-stat-card c-stat-card--info">
        <div class="c-stat-card__content">
            <div class="c-stat-card__body">
                <h5 class="c-stat-card__value">{{ stats.recent_results|length }}</h5>
                <p class="c-stat-card__label">Recent Results</p>
            </div>
            <i class="ti ti-history c-stat-card__icon"></i>
        </div>
    </div>
</div>

<!-- Match Results Content -->
<div class="c-match-columns" data-component="match-columns">
    <!-- Matches Awaiting Results -->
    <div class="c-match-column" data-column-type="pending">
        <div class="c-card">
            <div class="c-card__header">
                <h5 class="c-card__title">
                    <i class="ti ti-clock"></i>
                    Matches Awaiting Results
                </h5>
            </div>
            <div class="c-card__body">
                {% if pending_results %}
                <div class="c-table-responsive">
                    <table class="c-table" data-mobile-table data-table-type="matches">
                        <thead class="c-table__head">
                            <tr>
                                <th class="c-table__header" scope="col">Date</th>
                                <th class="c-table__header" scope="col">Home Team</th>
                                <th class="c-table__header" scope="col">Away Team</th>
                                <th class="c-table__header" scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="c-table__body">
                            {% for match in pending_results %}
                            <tr class="c-table__row">
                                <td class="c-table__cell">{{ match.date.strftime('%Y-%m-%d') if match.date else 'TBD' }}</td>
                                <td class="c-table__cell">{{ match.home_team.name if match.home_team else 'TBD' }}</td>
                                <td class="c-table__cell">{{ match.away_team.name if match.away_team else 'TBD' }}</td>
                                <td class="c-table__cell">
                                    <button class="c-btn c-btn--sm c-btn--primary" data-action="enter-result" data-match-id="{{ match.id }}">
                                        Enter Result
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="c-empty-state c-empty-state--compact">
                    <i class="ti ti-check-circle c-empty-state__icon"></i>
                    <p class="c-empty-state__text">No matches awaiting results.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Recent Results -->
    <div class="c-match-column" data-column-type="recent">
        <div class="c-card">
            <div class="c-card__header">
                <h5 class="c-card__title">
                    <i class="ti ti-history"></i>
                    Recent Results
                </h5>
            </div>
            <div class="c-card__body">
                {% if completed_matches %}
                <div class="c-table-responsive">
                    <table class="c-table" data-mobile-table data-table-type="matches">
                        <thead class="c-table__head">
                            <tr>
                                <th class="c-table__header" scope="col">Date</th>
                                <th class="c-table__header" scope="col">Teams</th>
                                <th class="c-table__header" scope="col">Score</th>
                            </tr>
                        </thead>
                        <tbody class="c-table__body">
                            {% for match in completed_matches[:10] %}
                            <tr class="c-table__row">
                                <td class="c-table__cell">{{ match.date.strftime('%Y-%m-%d') if match.date else 'N/A' }}</td>
                                <td class="c-table__cell">{{ match.home_team.name if match.home_team else 'TBD' }} vs {{ match.away_team.name if match.away_team else 'TBD' }}</td>
                                <td class="c-table__cell">
                                    <span class="c-badge c-badge--success">{{ match.home_team_score }}-{{ match.away_team_score }}</span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="c-empty-state c-empty-state--compact">
                    <i class="ti ti-trophy c-empty-state__icon"></i>
                    <p class="c-empty-state__text">No completed matches found.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block custom_css %}
{{ super() }}
{% if not config.get('ASSETS_PRODUCTION_MODE') and (vite_production_mode is not defined or not vite_production_mode()) %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/match-operations/seasons.css') }}">
{% endif %}
{% endblock %}

{% block custom_js %}
{{ super() }}
{# Match results page - uses admin-match-operations.js module #}
{% endblock %}
