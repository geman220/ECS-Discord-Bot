{% extends "admin_panel/base.html" %}

{% block title %}Quick Actions - Admin Panel{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active">Quick Actions</li>
{% endblock %}

{% block panel_content %}
<!-- Quick Actions Header -->
<div class="c-quick-actions-header" data-component="quick-actions-header">
    <div class="c-quick-actions-header__icon">
        <i class="ti ti-bolt"></i>
    </div>
    <div class="c-quick-actions-header__content">
        <h2 class="c-quick-actions-header__title">Quick Actions</h2>
        <p class="c-quick-actions-header__description">Perform common administrative tasks quickly and efficiently. These actions provide shortcuts to frequently used operations across the admin panel.</p>
    </div>
</div>

<!-- System Quick Actions -->
<div class="c-action-section" data-component="action-section">
    <div class="c-action-section__header">
        <i class="ti ti-settings c-action-section__icon"></i>
        <h5 class="c-action-section__title">System Operations</h5>
    </div>
    <div class="c-action-section__grid">
        <div class="c-action-c-card c-action-card--warning" data-component="action-card">
            <i class="ti ti-refresh c-action-card__icon"></i>
            <h6 class="c-action-card__title">Clear All Cache</h6>
            <p class="c-action-card__description">Reset all cached data</p>
            <button class="c-action-card__button" data-action="quick-clear-cache">
                Clear Cache
            </button>
        </div>
        <div class="c-action-c-card c-action-card--info" data-component="action-card">
            <i class="ti ti-database c-action-card__icon"></i>
            <h6 class="c-action-card__title">DB Health Check</h6>
            <p class="c-action-card__description">Check database status</p>
            <button class="c-action-card__button" data-action="check-db-health">
                Check DB
            </button>
        </div>
        <div class="c-action-c-card c-action-card--success" data-component="action-card">
            <i class="ti ti-shield c-action-card__icon"></i>
            <h6 class="c-action-card__title">Initialize Settings</h6>
            <p class="c-action-card__description">Reset admin settings</p>
            <button class="c-action-card__button" data-action="initialize-settings">
                Initialize
            </button>
        </div>
        <div class="c-action-c-card c-action-card--primary" data-component="action-card">
            <i class="ti ti-brand-discord c-action-card__icon"></i>
            <h6 class="c-action-card__title">Restart Bot</h6>
            <p class="c-action-card__description">Restart Discord bot</p>
            <button class="c-action-card__button" data-action="quick-restart-bot">
                Restart Bot
            </button>
        </div>
    </div>
</div>

<!-- User Management Quick Actions -->
<div class="c-action-section" data-component="action-section">
    <div class="c-action-section__header">
        <i class="ti ti-users c-action-section__icon"></i>
        <h5 class="c-action-section__title">User Management</h5>
    </div>
    <div class="c-action-section__grid c-action-section__grid--3col">
        <div class="c-action-c-card c-action-card--success" data-component="action-card">
            <i class="ti ti-user-check c-action-card__icon"></i>
            <h6 class="c-action-card__title">Approve All Pending</h6>
            <p class="c-action-card__description">Approve all pending user registrations</p>
            <button class="c-action-card__button" data-action="approve-all-pending">
                Approve All
            </button>
        </div>
        <div class="c-action-c-card c-action-card--primary" data-component="action-card">
            <i class="ti ti-user-plus c-action-card__icon"></i>
            <h6 class="c-action-card__title">Process Waitlist</h6>
            <p class="c-action-card__description">Process all users from waitlist</p>
            <button class="c-action-card__button" data-action="process-waitlist">
                Process All
            </button>
        </div>
        <div class="c-action-c-card c-action-card--info" data-component="action-card">
            <i class="ti ti-mail c-action-card__icon"></i>
            <h6 class="c-action-card__title">Send Notifications</h6>
            <p class="c-action-card__description">Send bulk notifications to users</p>
            <button class="c-action-card__button" data-action="send-bulk-notifications">
                Send Notifications
            </button>
        </div>
    </div>
</div>

<!-- Content Management Quick Actions -->
<div class="c-action-section" data-component="action-section">
    <div class="c-action-section__header">
        <i class="ti ti-file-text c-action-section__icon"></i>
        <h5 class="c-action-section__title">Content Management</h5>
    </div>
    <div class="c-action-section__grid">
        <div class="c-action-c-card c-action-card--purple" data-component="action-card">
            <i class="ti ti-template c-action-card__icon"></i>
            <h6 class="c-action-card__title">Sync Templates</h6>
            <p class="c-action-card__description">Synchronize message templates</p>
            <button class="c-action-card__button" data-action="sync-templates">
                Sync Templates
            </button>
        </div>
        <div class="c-action-c-card c-action-card--warning" data-component="action-card">
            <i class="ti ti-bell c-action-card__icon"></i>
            <h6 class="c-action-card__title">Test Notifications</h6>
            <p class="c-action-card__description">Send test push notification</p>
            <button class="c-action-card__button" data-action="quick-test-notifications">
                Test Push
            </button>
        </div>
        <div class="c-action-c-card c-action-card--danger" data-component="action-card">
            <i class="ti ti-announcement c-action-card__icon"></i>
            <h6 class="c-action-card__title">Emergency Alert</h6>
            <p class="c-action-card__description">Send emergency system alert</p>
            <button class="c-action-card__button" data-action="send-emergency-alert">
                Send Alert
            </button>
        </div>
        <div class="c-action-c-card c-action-card--secondary" data-component="action-card">
            <i class="ti ti-file-export c-action-card__icon"></i>
            <h6 class="c-action-card__title">Export Data</h6>
            <p class="c-action-card__description">Export system data</p>
            <button class="c-action-card__button" data-action="export-system-data">
                Export Data
            </button>
        </div>
    </div>
</div>

<!-- Maintenance Quick Actions -->
<div class="c-action-section" data-component="action-section">
    <div class="c-action-section__header">
        <i class="ti ti-tool c-action-section__icon"></i>
        <h5 class="c-action-section__title">Maintenance & Troubleshooting</h5>
    </div>
    <div class="c-action-section__grid c-action-section__grid--3col">
        <div class="c-action-c-card c-action-card--danger" data-component="action-card">
            <i class="ti ti-power c-action-card__icon"></i>
            <h6 class="c-action-card__title">Maintenance Mode</h6>
            <p class="c-action-card__description">Toggle system maintenance mode</p>
            <button class="c-action-card__button" data-action="toggle-maintenance-mode">
                Toggle Mode
            </button>
        </div>
        <div class="c-action-c-card c-action-card--info" data-component="action-card">
            <i class="ti ti-file-text c-action-card__icon"></i>
            <h6 class="c-action-card__title">Clear Logs</h6>
            <p class="c-action-card__description">Clear system and error logs</p>
            <button class="c-action-card__button" data-action="clear-system-logs">
                Clear Logs
            </button>
        </div>
        <div class="c-action-c-card c-action-card--warning" data-component="action-card">
            <i class="ti ti-report c-action-card__icon"></i>
            <h6 class="c-action-card__title">System Report</h6>
            <p class="c-action-card__description">Generate full system report</p>
            <button class="c-action-card__button" data-action="generate-system-report">
                Generate Report
            </button>
        </div>
    </div>
</div>

<!-- Custom Quick Actions Form -->
<div class="c-custom-actions" data-component="custom-actions">
    <div class="c-custom-actions__header">
        <i class="ti ti-code c-custom-actions__header-icon"></i>
        <h5 class="c-custom-actions__title">Custom Actions</h5>
    </div>
    <p class="c-custom-actions__description">Execute custom administrative commands and scripts</p>
    <form class="c-custom-actions__form">
        <div class="c-custom-actions__fields">
            <div class="c-custom-actions__field">
                <label class="c-custom-actions__label">Action Type</label>
                <select class="c-custom-actions__select" id="actionType" data-form-select>
                    <option value="">Select action type...</option>
                    <option value="database">Database Query</option>
                    <option value="cache">Cache Operation</option>
                    <option value="user">User Management</option>
                    <option value="system">System Command</option>
                    <option value="notification">Send Notification</option>
                </select>
            </div>
            <div class="c-custom-actions__field">
                <label class="c-custom-actions__label">Target</label>
                <input type="text" class="c-custom-actions__input" id="actionTarget" placeholder="Target (optional)" data-form-control>
            </div>
        </div>
        <div class="c-custom-actions__field c-custom-actions__field--full">
            <label class="c-custom-actions__label">Command/Parameters</label>
            <textarea class="c-custom-actions__textarea" id="actionCommand" rows="3" placeholder="Enter command or parameters..." data-form-control></textarea>
        </div>
        <div class="c-custom-actions__field c-custom-actions__field--full">
            <div class="c-custom-actions__checkbox">
                <input class="c-custom-actions__checkbox-input" type="checkbox" id="confirmBeforeExecution">
                <label class="c-custom-actions__checkbox-label" for="confirmBeforeExecution">
                    Require confirmation before execution
                </label>
            </div>
        </div>
        <div class="c-custom-actions__buttons">
            <button type="button" class="c-custom-actions__button c-custom-actions__button--primary" data-action="execute-custom-action">
                <i class="ti ti-play"></i>
                <span>Execute Action</span>
            </button>
            <button type="button" class="c-custom-actions__button c-custom-actions__button--secondary" data-action="validate-custom-action">
                <i class="ti ti-check"></i>
                <span>Validate Only</span>
            </button>
            <button type="button" class="c-custom-actions__button c-custom-actions__button--info" data-action="save-custom-action">
                <i class="ti ti-device-floppy"></i>
                <span>Save as Template</span>
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block custom_css %}
{{ super() }}
{% if not config.get('ASSETS_PRODUCTION_MODE') and (vite_production_mode is not defined or not vite_production_mode()) %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/admin-panel/quick-actions.css') }}" />
{% endif %}
{% endblock %}

{% block custom_js %}
{{ super() }}
{# Quick actions now handled by EventDelegation via admin-quick-actions-handlers.js #}
{# All data-action attributes are processed by the EventDelegation system #}
{% endblock %}