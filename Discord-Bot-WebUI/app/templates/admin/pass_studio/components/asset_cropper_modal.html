{# Asset Cropper Modal - For uploading and cropping pass assets #}

<div class="modal c-modal fade" id="assetCropperModal" tabindex="-1" aria-labelledby="assetCropperModalLabel" aria-hidden="true" data-modal>
    <div class="modal-dialog c-modal__dialog modal-dialog-centered c-modal__dialog--centered modal-lg c-modal__dialog--lg" data-modal-dialog>
        <div class="modal-content c-modal__content" data-modal-content>
            <div class="modal-header c-modal__header" data-modal-header>
                <h5 class="modal-title c-modal__title" id="assetCropperModalLabel">
                    <i class="ti ti-crop me-2"></i>
                    Upload <span id="cropper-asset-name">Asset</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-dismiss></button>
            </div>
            <div class="modal-body c-modal__body" data-modal-body>
                {# Upload Area (shown initially) #}
                <div id="cropper-upload-area" class="text-center py-5">
                    <div class="mb-3">
                        <i class="ti ti-cloud-upload display-1 text-muted"></i>
                    </div>
                    <p class="text-muted mb-2">
                        Upload an image to crop to <strong><span id="cropper-dimensions">29x29</span>px</strong>
                    </p>
                    <p class="text-muted small mb-4">
                        Supported formats: PNG, JPG, GIF, WebP
                    </p>
                    <input type="file" id="cropper-file-input" accept="image/*" class="d-none" data-action="load-image">
                    <button type="button" class="c-btn c-btn--primary c-btn--lg transform-none" data-action="trigger-file-input" data-target="cropper-file-input">
                        <i class="ti ti-upload me-2"></i>Choose Image
                    </button>
                </div>

                {# Cropper Canvas (shown after image loaded) #}
                <div id="cropper-canvas-area" class="d-none">
                    <div class="d-flex justify-content-center mb-3">
                        <div class="cropper-canvas-wrapper">
                            <canvas id="asset-cropper-canvas" class="cropper-canvas"></canvas>
                        </div>
                    </div>

                    {# Cropper Controls #}
                    <div class="d-flex justify-content-center gap-2 mb-3">
                        <button type="button" class="c-btn c-btn--outline-secondary transform-none" data-action="zoom-out" title="Zoom Out">
                            <i class="ti ti-zoom-out"></i>
                        </button>
                        <button type="button" class="c-btn c-btn--outline-secondary transform-none" data-action="zoom-in" title="Zoom In">
                            <i class="ti ti-zoom-in"></i>
                        </button>
                        <button type="button" class="c-btn c-btn--outline-secondary transform-none" data-action="reset-position" title="Reset Position">
                            <i class="ti ti-refresh"></i>
                        </button>
                    </div>

                    <div class="alert alert-info py-2 mb-0" data-alert>
                        <i class="ti ti-info-circle me-1"></i>
                        <strong>Tip:</strong> Drag to position, scroll to zoom. The visible area will be saved.
                    </div>
                </div>
            </div>
            <div class="modal-footer c-modal__footer d-flex justify-content-between" data-modal-footer>
                <div>
                    <button type="button" class="c-btn c-btn--outline-danger d-none transform-none" id="cropper-delete-btn" data-action="delete-asset">
                        <i class="ti ti-trash me-1"></i>Remove Asset
                    </button>
                </div>
                <div class="d-flex gap-2">
                    <button type="button" class="c-btn c-btn--outline-secondary transform-none" data-bs-dismiss="modal" data-dismiss>Cancel</button>
                    <button type="button" class="c-btn c-btn--outline-primary d-none transform-none" id="cropper-change-btn" data-action="change-image">
                        <i class="ti ti-photo me-1"></i>Change Image
                    </button>
                    <button type="button" class="c-btn c-btn--primary transform-none" id="cropper-save-btn" data-action="save-and-upload" disabled>
                        <i class="ti ti-device-floppy me-1"></i>Save Asset
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
