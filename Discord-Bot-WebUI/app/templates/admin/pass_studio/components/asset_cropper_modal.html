{# Asset Cropper Modal - For uploading and cropping pass assets #}

<div class="modal fade" id="assetCropperModal" tabindex="-1" aria-labelledby="assetCropperModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="assetCropperModalLabel">
                    <i class="ti ti-crop me-2"></i>
                    Upload <span id="cropper-asset-name">Asset</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {# Upload Area (shown initially) #}
                <div id="cropper-upload-area" class="text-center py-5">
                    <div class="mb-3">
                        <i class="ti ti-cloud-upload display-1 text-muted"></i>
                    </div>
                    <p class="text-muted mb-2">
                        Upload an image to crop to <strong><span id="cropper-dimensions">29x29</span>px</strong>
                    </p>
                    <p class="text-muted small mb-4">
                        Supported formats: PNG, JPG, GIF, WebP
                    </p>
                    <input type="file" id="cropper-file-input" accept="image/*" class="d-none" onchange="AssetCropper.loadImage(this)">
                    <button type="button" class="btn btn-primary btn-lg" onclick="document.getElementById('cropper-file-input').click()">
                        <i class="ti ti-upload me-2"></i>Choose Image
                    </button>
                </div>

                {# Cropper Canvas (shown after image loaded) #}
                <div id="cropper-canvas-area" class="d-none">
                    <div class="d-flex justify-content-center mb-3">
                        <div class="cropper-canvas-wrapper" style="border: 2px solid var(--bs-border-color); border-radius: 8px; overflow: hidden; background: #f0f0f0;">
                            <canvas id="asset-cropper-canvas" style="display: block; max-width: 100%;"></canvas>
                        </div>
                    </div>

                    {# Cropper Controls #}
                    <div class="d-flex justify-content-center gap-2 mb-3">
                        <button type="button" class="btn btn-outline-secondary" onclick="AssetCropper.zoomOut()" title="Zoom Out">
                            <i class="ti ti-zoom-out"></i>
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="AssetCropper.zoomIn()" title="Zoom In">
                            <i class="ti ti-zoom-in"></i>
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="AssetCropper.resetPosition()" title="Reset Position">
                            <i class="ti ti-refresh"></i>
                        </button>
                    </div>

                    <div class="alert alert-info py-2 mb-0">
                        <i class="ti ti-info-circle me-1"></i>
                        <strong>Tip:</strong> Drag to position, scroll to zoom. The visible area will be saved.
                    </div>
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
                <div>
                    <button type="button" class="btn btn-outline-danger d-none" id="cropper-delete-btn" onclick="AssetCropper.deleteAsset()">
                        <i class="ti ti-trash me-1"></i>Remove Asset
                    </button>
                </div>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-outline-primary d-none" id="cropper-change-btn" onclick="AssetCropper.changeImage()">
                        <i class="ti ti-photo me-1"></i>Change Image
                    </button>
                    <button type="button" class="btn btn-primary" id="cropper-save-btn" onclick="AssetCropper.saveAndUpload()" disabled>
                        <i class="ti ti-device-floppy me-1"></i>Save Asset
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
