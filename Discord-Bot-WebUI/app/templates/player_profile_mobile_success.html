{% extends "mobile_base.html" %}

{% block title %}Profile Complete! - {{ player.name }}{% endblock %}

{% block main_content %}
<div class="container-fluid py-3" data-component="profile-success">
    <!-- Success Animation Card -->
    <div class="c-success-card" data-component="success-card">
        <div class="c-success-card__body">
            <!-- Success Icon -->
            <div class="c-success-icon">
                <i class="ti ti-circle-check"></i>
            </div>

            <h2 class="c-success-card__title">
                {% if action_type == 'verified' %}
                Profile Confirmed!
                {% else %}
                Profile Updated!
                {% endif %}
            </h2>

            <p class="c-success-card__text">
                {% if action_type == 'verified' %}
                Thank you for confirming your profile information is current.
                {% else %}
                Thank you for updating your profile information.
                {% endif %}
            </p>
        </div>
    </div>

    <!-- Player Confirmation Card -->
    <div class="c-confirmation-card" data-component="confirmation-card">
        <div class="c-confirmation-card__header">
            <h5 class="c-confirmation-card__title">
                <i class="ti ti-user-check"></i>Profile Complete
            </h5>
        </div>
        <div class="c-confirmation-card__body">
            <div class="c-player-info" data-component="player-info">
                {% if player.profile_picture_url %}
                <img src="{{ player.profile_picture_url }}?v={{ player.updated_at.timestamp() }}"
                     class="c-player-info__avatar"
                     alt="Profile Picture">
                {% else %}
                <img src="{{ url_for('static', filename='img/default_player.png') }}"
                     class="c-player-info__avatar"
                     alt="Default Profile Picture">
                {% endif %}
                <div class="c-player-info__details">
                    <h6 class="c-player-info__name">{{ player.name }}</h6>
                    {% if player.teams %}
                        {% for team in player.teams %}
                        <span class="c-badge c-badge--success" data-badge>{{ team.name }}</span>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>

            <div class="c-status-grid" data-component="status-grid">
                <div class="c-status-item" data-status-item>
                    <div class="c-status-item__border"></div>
                    <i class="ti ti-calendar-check c-status-item__icon c-status-item__icon--success"></i>
                    <small class="c-status-item__label">Profile Status</small>
                    <div class="c-status-item__value c-status-item__value--success">Current</div>
                </div>
                <div class="c-status-item" data-status-item>
                    <i class="ti ti-clock c-status-item__icon c-status-item__icon--success"></i>
                    <small class="c-status-item__label">Last Updated</small>
                    <div class="c-status-item__value">Just Now</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Show to Staff Card -->
    <div class="c-staff-notice" data-component="staff-notice">
        <div class="c-staff-notice__body">
            <h5 class="c-staff-notice__title">
                <i class="ti ti-hand-finger"></i>Show This Screen to Staff
            </h5>
            <p class="c-staff-notice__text">Present this confirmation to the registration staff to verify you have completed your profile update.</p>

            <!-- Large Verification Badge -->
            <div class="c-verification-badge" data-component="verification-badge">
                <div class="c-verification-badge__icon">
                    <i class="ti ti-shield-check"></i>VERIFIED
                </div>
                <div class="c-verification-badge__timestamp">
                    Completed: Just now
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="c-form-actions" data-component="form-actions">
        <a href="{{ url_for('players.player_profile', player_id=player.id) }}"
           class="c-btn c-btn--primary c-btn--lg">
            <i class="ti ti-user"></i>View My Profile
        </a>
    </div>

    <!-- Thank You Message -->
    <div class="c-thank-you" data-component="thank-you">
        <p class="c-thank-you__message">
            <i class="ti ti-heart c-thank-you__icon"></i>
            Thank you for being part of ECS FC!
        </p>
        <p class="c-thank-you__subtitle">We look forward to an amazing season with you.</p>
    </div>
</div>
{% endblock %}

{% block custom_css %}
{{ super() }}
{% if not config.get('ASSETS_PRODUCTION_MODE') %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/features/profile-success-animations.css') }}">
{% endif %}
{% endblock %}

{% block custom_js %}
{{ super() }}

<div data-success-celebration></div>
{% if not config.get('ASSETS_PRODUCTION_MODE') %}
<script src="{{ url_for('static', filename='custom_js/profile-success.js') }}"></script>

{% endif %}
{% endblock %}
