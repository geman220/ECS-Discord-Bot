{% extends "base_flowbite.html" %}
{% from 'macros/flowbite.html' import card, button %}

{% block title %}{{ topic.title }}{% endblock %}
{% block page_title %}{{ topic.title }}{% endblock %}

{% block custom_css %}
{{ super() }}
<style>
    /* Help content styling for rendered markdown */
    .help-content h1 {
        @apply text-2xl font-bold text-gray-900 dark:text-white mb-4 mt-6 first:mt-0;
    }
    .help-content h2 {
        @apply text-xl font-semibold text-gray-900 dark:text-white mb-3 mt-5;
    }
    .help-content h3 {
        @apply text-lg font-semibold text-gray-900 dark:text-white mb-2 mt-4;
    }
    .help-content p {
        @apply text-gray-700 dark:text-gray-300 mb-4 leading-relaxed;
    }
    .help-content ul, .help-content ol {
        @apply mb-4 pl-6 space-y-2;
    }
    .help-content ul {
        @apply list-disc;
    }
    .help-content ol {
        @apply list-decimal;
    }
    .help-content li {
        @apply text-gray-700 dark:text-gray-300;
    }
    .help-content code {
        @apply bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-1.5 py-0.5 rounded text-sm font-mono;
    }
    .help-content pre {
        @apply bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mb-4 overflow-x-auto;
    }
    .help-content pre code {
        @apply bg-transparent p-0;
    }
    .help-content blockquote {
        @apply border-l-4 border-ecs-green pl-4 py-2 my-4 bg-gray-50 dark:bg-gray-700/50 rounded-r-lg;
    }
    .help-content a {
        @apply text-ecs-green hover:underline;
    }
    .help-content hr {
        @apply my-6 border-gray-200 dark:border-gray-700;
    }
    .help-content table {
        @apply w-full mb-4 border-collapse;
    }
    .help-content th, .help-content td {
        @apply border border-gray-200 dark:border-gray-700 px-4 py-2 text-left;
    }
    .help-content th {
        @apply bg-gray-50 dark:bg-gray-700 font-semibold text-gray-900 dark:text-white;
    }
    .help-content img {
        @apply rounded-lg shadow-md my-4 max-w-full h-auto;
    }
</style>
{% endblock %}

{% block main_content %}
<div class="space-y-6">
    <!-- Breadcrumb -->
    <nav class="flex" aria-label="Breadcrumb">
        <ol class="inline-flex items-center space-x-1 md:space-x-3">
            <li class="inline-flex items-center">
                <a href="{{ url_for('help.index') }}" class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-ecs-green dark:text-gray-400 dark:hover:text-ecs-green">
                    <i class="ti ti-help mr-2"></i>
                    Help Topics
                </a>
            </li>
            <li>
                <div class="flex items-center">
                    <i class="ti ti-chevron-right text-gray-400 mx-2"></i>
                    <span class="text-sm font-medium text-gray-900 dark:text-white">{{ topic.title }}</span>
                </div>
            </li>
        </ol>
    </nav>

    <!-- Page Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{{ topic.title }}</h2>
    </div>

    <!-- Help Content Card -->
    {% call card() %}
    <div class="help-content prose dark:prose-invert max-w-none">
        {{ content|safe }}
    </div>
    {% endcall %}

    <!-- Back Button -->
    <div>
        {{ button("Back to Help Topics", variant="outline", href=url_for('help.index'), icon="arrow-left") }}
    </div>
</div>
{% endblock %}
