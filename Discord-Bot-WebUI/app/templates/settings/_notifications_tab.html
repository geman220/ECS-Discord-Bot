{# Notifications Settings Tab Partial #}
<div class="c-settings-tab" id="tab-notifications" role="tabpanel" data-component="settings-tab" data-tab-pane="notifications">
    <div class="row">
        <div class="col-lg-8">
            <form id="notificationForm"
                  action="{{ url_for('account.update_notifications') }}"
                  method="POST"
                  class="c-settings-form"
                  data-form="notifications"
                  data-component="settings-form">
                {{ notification_form.hidden_tag() }}

                <!-- Email Notifications -->
                <div class="c-notification-c-card" data-component="notification-card" data-type="email">
                    <div class="c-notification-card__content">
                        <div class="c-notification-card__icon c-notification-card__icon--primary">
                            <i class="ti ti-mail"></i>
                        </div>
                        <div class="c-notification-card__body">
                            <div class="c-notification-card__header">
                                <div class="c-notification-card__info">
                                    <h6 class="c-notification-card__title">Email Notifications</h6>
                                    <small class="c-notification-card__subtitle">Receive updates via email</small>
                                </div>
                                <div class="c-notification-switch" data-component="notification-switch">
                                    {{ notification_form.email_notifications(class="c-notification-switch__input", **{"data-input": "email-toggle"}) }}
                                    <label for="{{ notification_form.email_notifications.id }}" class="c-notification-switch__label"></label>
                                </div>
                            </div>
                            <p class="c-notification-card__text">
                                Match schedules, team announcements, and league updates will be sent to {{ safe_current_user.email }}
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Discord Notifications -->
                <div class="c-notification-c-card" data-component="notification-card" data-type="discord">
                    <div class="c-notification-card__content">
                        <div class="c-notification-card__icon c-notification-card__icon--discord">
                            <i class="ti ti-brand-discord"></i>
                        </div>
                        <div class="c-notification-card__body">
                            <div class="c-notification-card__header">
                                <div class="c-notification-card__info">
                                    <h6 class="c-notification-card__title">Discord Notifications</h6>
                                    <small class="c-notification-card__subtitle">Receive DMs via Discord bot</small>
                                </div>
                                <div class="c-notification-switch" data-component="notification-switch">
                                    {{ notification_form.discord_notifications(class="c-notification-switch__input", **{"data-input": "discord-toggle"}) }}
                                    <label for="{{ notification_form.discord_notifications.id }}" class="c-notification-switch__label"></label>
                                </div>
                            </div>
                            {% if safe_current_user.player and safe_current_user.player.discord_id %}
                            <p class="c-notification-card__text">
                                Direct messages will be sent to your linked Discord account
                            </p>
                            {% else %}
                            <p class="c-notification-card__text c-notification-card__text--warning">
                                <i class="ti ti-alert-triangle"></i>
                                Link your Discord account in the Integrations tab to receive notifications
                            </p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- SMS Notifications -->
                <div class="c-notification-c-card" data-component="notification-card" data-type="sms">
                    <div class="c-notification-card__content">
                        <div class="c-notification-card__icon c-notification-card__icon--success">
                            <i class="ti ti-message-text"></i>
                        </div>
                        <div class="c-notification-card__body">
                            <div class="c-notification-card__header">
                                <div class="c-notification-card__info">
                                    <h6 class="c-notification-card__title">SMS Notifications</h6>
                                    <small class="c-notification-card__subtitle">Receive text messages</small>
                                </div>
                                {% if safe_current_user.sms_notifications %}
                                <span class="c-badge c-badge--success" data-badge data-status="enabled">Enabled</span>
                                {% else %}
                                <span class="c-badge c-badge--secondary" data-badge data-status="disabled">Disabled</span>
                                {% endif %}
                            </div>

                            {% if safe_current_user.sms_notifications %}
                            <p class="c-notification-card__text">
                                {% if safe_current_user.player and safe_current_user.player.phone %}
                                Receiving texts at {{ safe_current_user.player.phone }}
                                {% else %}
                                SMS notifications are enabled
                                {% endif %}
                            </p>
                            <button type="button"
                                    id="smsOptOutBtn"
                                    class="c-notification-btn c-notification-btn--danger"
                                    data-action="sms-opt-out">
                                <i class="ti ti-bell-off"></i>
                                <span>Disable SMS</span>
                            </button>
                            {% else %}
                            <p class="c-notification-card__text">
                                Get instant text alerts for last-minute schedule changes and game-day updates
                            </p>
                            <button type="button"
                                    id="smsOptInBtn"
                                    class="c-notification-btn c-notification-btn--success"
                                    data-bs-toggle="modal"
                                    data-bs-target="#smsOptInModal"
                                    data-action="sms-opt-in">
                                <i class="ti ti-bell-plus"></i>
                                <span>Enable SMS Notifications</span>
                            </button>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <button type="submit" class="c-settings-btn c-settings-btn--primary" data-action="save-notifications">
                    <i class="ti ti-device-floppy"></i>
                    <span>Save Notification Preferences</span>
                </button>
            </form>
        </div>

        <!-- Info Sidebar -->
        <div class="col-lg-4">
            <div class="c-settings-sidebar" data-component="settings-sidebar">
                <div class="c-settings-sidebar__content">
                    <h6 class="c-settings-sidebar__title">
                        <i class="ti ti-info-circle c-settings-sidebar__icon"></i>
                        About Notifications
                    </h6>
                    <p class="c-settings-sidebar__text">
                        Control how you receive important updates from ECS FC. You can enable multiple channels to ensure you never miss a message.
                    </p>

                    <h6 class="c-settings-sidebar__section-title">What you'll receive:</h6>
                    <ul class="c-settings-sidebar__list">
                        <li>Match schedules and reminders</li>
                        <li>Team announcements</li>
                        <li>Last-minute schedule changes</li>
                        <li>League updates and news</li>
                        <li>Season registration reminders</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
